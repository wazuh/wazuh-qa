- name: slack_option_tag_no_value
  description: When the option has no value passed, the slack integration is unable to run
  configuration_parameters:
    API_KEY: Insert using --pagerduty-api-key parameter
    OPTIONS_VALUE:
  metadata:
    integration: pagerduty
    sends_message: false

- name: slack_option_empty_json_value
  description: When the option is passed an empty JSON, the slack integration is works properly
  configuration_parameters:
    API_KEY: Insert using --pagerduty-api-key parameter
    OPTIONS_VALUE: '{}'
  metadata:
    integration: pagerduty
    sends_message: true
    added_option:
    response_code: '202'

- name: slack_option_custom_pretext
  description: When a custom value is added to an option, the slack integration works and the option is in the message
  configuration_parameters:
    API_KEY: Insert using --pagerduty-api-key parameterr
    OPTIONS_VALUE: '{"pretext":"Custom Pretext"}'
  metadata:
    integration: pagerduty
    sends_message: true
    added_option: '"pretext": "Custom Pretext"'
    response_code: '202'

- name: slack_option_invalid_json
  description: When an invalid json is passed, the integration is unable to send the message
  configuration_parameters:
    API_KEY: Insert using --pagerduty-api-key parameter
    OPTIONS_VALUE: '{"pretext":"Custom Pretext}'
  metadata:
    integration: pagerduty
    sends_message: false

- name: slack_option_invalid_value
  description: When an invalid value for an option, the message is sent to the integration endpoint
  configuration_parameters:
    API_KEY: Insert using --pagerduty-api-key parameter
    OPTIONS_VALUE: '{"severity":"Invalid Severity"}'
  metadata:
    integration: pagerduty
    sends_message: true
    added_option: '"severity": "Invalid Severity"'
    response_code: '202'

- name: slack_custom_option
  description: When a non existent option is passed, the message is sent to the integration endpoint and works properly
  configuration_parameters:
    API_KEY: Insert using --pagerduty-api-key parameter
    OPTIONS_VALUE: '{"custom_option":"custom value"}'
  metadata:
    integration: pagerduty
    sends_message: true
    added_option: '"custom_option": "custom value"'
    response_code: '202'
