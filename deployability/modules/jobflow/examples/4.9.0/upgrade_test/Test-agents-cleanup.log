[36m[2024-09-03 16:37:34] [DEBUG] [1671171] [MainThread] [jobflow]: Validating input file: modules/jobflow/examples/4.9.0/upgrade_test/Test-agents-cleanup.yaml[0m
[36m[2024-09-03 16:37:34] [DEBUG] [1671171] [MainThread] [jobflow]: Loading schema file: /home/fcaffieri/repos/wazuh-qa/.venv/lib/python3.10/site-packages/jobflow/schemas/schema_v1.json[0m
[36m[2024-09-03 16:37:34] [DEBUG] [1671171] [MainThread] [jobflow]: Loading yaml file: modules/jobflow/examples/4.9.0/upgrade_test/Test-agents-cleanup.yaml[0m
[36m[2024-09-03 16:37:34] [DEBUG] [1671171] [MainThread] [jobflow]: Loading workflow file: modules/jobflow/examples/4.9.0/upgrade_test/Test-agents-cleanup.yaml[0m
[36m[2024-09-03 16:37:34] [DEBUG] [1671171] [MainThread] [jobflow]: Process workflow.[0m
[32m[2024-09-03 16:37:34] [INFO] [1671171] [MainThread] [jobflow]: Executing DAG tasks.[0m
[32m[2024-09-03 16:37:34] [INFO] [1671171] [MainThread] [jobflow]: Executing tasks in parallel.[0m
[32m[2024-09-03 16:37:34] [INFO] [1671171] [ThreadPoolExecutor-0_0] [jobflow]: [allocate-manager-linux-ubuntu-22.04-amd64] Starting task.[0m
[36m[2024-09-03 16:37:34] [DEBUG] [1671171] [ThreadPoolExecutor-0_0] [jobflow]: Running task "allocate-manager-linux-ubuntu-22.04-amd64" with arguments: ['modules/allocation/main.py', '--action=create', '--provider=aws', '--size=large', '--composite-name=linux-ubuntu-22.04-amd64', '--inventory-output=/tmp/dtt1-poc/manager-linux-ubuntu-22.04-amd64/inventory.yaml', '--track-output=/tmp/dtt1-poc/manager-linux-ubuntu-22.04-amd64/track.yaml', '--label-termination-date=1d', '--label-team=qa', '--label-issue=https://github.com/wazuh/wazuh/issues/25497'][0m
[36m[2024-09-03 16:38:30] [DEBUG] [1671171] [ThreadPoolExecutor-0_0] [jobflow]: Finished task "allocate-manager-linux-ubuntu-22.04-amd64" execution with result:
[37m[2024-09-03 16:37:35] [DEBUG] SPNEGO._GSS: Python gssapi not available, cannot use any GSSAPIProxy protocols: No module named 'gssapi'[0m
[37m[2024-09-03 16:37:35] [DEBUG] SPNEGO._GSS: Python gssapi IOV extension not available: No module named 'gssapi'[0m
[32m[2024-09-03 16:37:35] [INFO] ALLOCATOR: Creating instance at /tmp/wazuh-qa[0m
[37m[2024-09-03 16:37:36] [DEBUG] ALLOCATOR: No config provided. Generating from payload[0m
[37m[2024-09-03 16:37:36] [DEBUG] ALLOCATOR: Generating new key pair[0m
[37m[2024-09-03 16:37:36] [DEBUG] ALLOCATOR: Creating base directory: /tmp/wazuh-qa/AWS-70F8C685-0F27-4739-8A84-D9D34F049FBD[0m
[37m[2024-09-03 16:37:57] [DEBUG] ALLOCATOR: Renaming temp /tmp/wazuh-qa/AWS-70F8C685-0F27-4739-8A84-D9D34F049FBD directory to /tmp/wazuh-qa/wazuh-25497-ubuntu-22.04-5123[0m
[32m[2024-09-03 16:37:57] [INFO] ALLOCATOR [WAZUH-25497-UBUNTU-22.04]: Instance i-0d760962e3a5eebe1 created.[0m
[32m[2024-09-03 16:37:58] [INFO] ALLOCATOR [WAZUH-25497-UBUNTU-22.04]: Instance i-0d760962e3a5eebe1 started.[0m
[32m[2024-09-03 16:37:59] [INFO] ALLOCATOR [WAZUH-25497-UBUNTU-22.04]: The inventory file generated at /tmp/dtt1-poc/manager-linux-ubuntu-22.04-amd64/inventory.yaml[0m
[32m[2024-09-03 16:37:59] [INFO] ALLOCATOR [WAZUH-25497-UBUNTU-22.04]: The track file generated at /tmp/dtt1-poc/manager-linux-ubuntu-22.04-amd64/track.yaml[0m
[33m[2024-09-03 16:37:59] [WARNING] ALLOCATOR [WAZUH-25497-UBUNTU-22.04]: Error on attempt 1 of 30: [Errno None] Unable to connect to port 2200 on 44.203.184.6[0m
[32m[2024-09-03 16:38:30] [INFO] ALLOCATOR [WAZUH-25497-UBUNTU-22.04]: SSH connection successful.[0m
[32m[2024-09-03 16:38:30] [INFO] ALLOCATOR [WAZUH-25497-UBUNTU-22.04]: Instance i-0d760962e3a5eebe1 created successfully.[0m
[0m
[32m[2024-09-03 16:38:30] [INFO] [1671171] [ThreadPoolExecutor-0_0] [jobflow]: [allocate-manager-linux-ubuntu-22.04-amd64] Finished task in 56.01 seconds.[0m
[32m[2024-09-03 16:38:30] [INFO] [1671171] [ThreadPoolExecutor-0_0] [jobflow]: [provision-manager-linux-ubuntu-22.04-amd64] Starting task.[0m
[36m[2024-09-03 16:38:30] [DEBUG] [1671171] [ThreadPoolExecutor-0_0] [jobflow]: Running task "provision-manager-linux-ubuntu-22.04-amd64" with arguments: ['modules/provision/main.py', '--inventory=/tmp/dtt1-poc/manager-linux-ubuntu-22.04-amd64/inventory.yaml', "--install={'component': 'wazuh-manager', 'type': 'assistant', 'version': '4.9.0', 'live': False}"][0m
[36m[2024-09-03 16:46:01] [DEBUG] [1671171] [ThreadPoolExecutor-0_0] [jobflow]: Finished task "provision-manager-linux-ubuntu-22.04-amd64" execution with result:
[37m[2024-09-03 16:38:31] [DEBUG] SPNEGO._GSS: Python gssapi not available, cannot use any GSSAPIProxy protocols: No module named 'gssapi'[0m
[37m[2024-09-03 16:38:31] [DEBUG] SPNEGO._GSS: Python gssapi IOV extension not available: No module named 'gssapi'[0m
[37m[2024-09-03 16:38:31] [DEBUG] PROVISIONER: Setting dependencies: {} for wazuh-manager component.[0m
[32m[2024-09-03 16:38:31] [INFO] PROVISIONER: Initiating provisionment.[0m
[37m[2024-09-03 16:38:31] [DEBUG] PROVISIONER: Running action install for components: [ComponentInfo(component='wazuh-manager', type='assistant', version='4.9.0', dependencies=None, live=False)][0m
[32m[2024-09-03 16:38:31] [INFO] PROVISIONER: Provisioning "wazuh-manager"...[0m
[37m[2024-09-03 16:38:31] [DEBUG] PROVISIONER: Get OS family for ec2-44-203-184-6.compute-1.amazonaws.com.[0m
[37m[2024-09-03 16:38:31] [DEBUG] PROVISIONER: Using inventory: {'all': {'hosts': {'ec2-44-203-184-6.compute-1.amazonaws.com': {'ansible_port': 2200, 'ansible_user': 'ubuntu', 'ansible_ssh_private_key_file': '/tmp/wazuh-qa/wazuh-25497-ubuntu-22.04-5123/wazuh-25497-ubuntu-22.04-key-2035'}}}}[0m
[37m[2024-09-03 16:38:31] [DEBUG] PROVISIONER: Running playbook: {'hosts': 'ec2-44-203-184-6.compute-1.amazonaws.com', 'become': True, 'gather_facts': True, 'tasks': [{'name': 'Capture ansible_os_family', 'set_fact': {'ansible_os_family': "{{ ansible_facts['distribution_file_variety'] }}", 'cacheable': 'yes'}}]}[0m
[0;34mUsing /etc/ansible/ansible.cfg as config file[0m

PLAY [ec2-44-203-184-6.compute-1.amazonaws.com] ********************************

TASK [Gathering Facts] *********************************************************
[1;35mcore/2.17/reference_appendices/interpreter_discovery.html for more information.[0m
[0;32mok: [ec2-44-203-184-6.compute-1.amazonaws.com][0m

TASK [Capture ansible_os_family] ***********************************************
[0;32mok: [ec2-44-203-184-6.compute-1.amazonaws.com] => changed=false [0m
[0;32m  ansible_facts:[0m
[0;32m    ansible_os_family: Debian[0m

PLAY RECAP *********************************************************************
[0;32mec2-44-203-184-6.compute-1.amazonaws.com[0m : [0;32mok=2   [0m changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
[37m[2024-09-03 16:38:42] [DEBUG] PROVISIONER: Playbook {'hosts': 'ec2-44-203-184-6.compute-1.amazonaws.com', 'become': True, 'gather_facts': True, 'tasks': [{'name': 'Capture ansible_os_family', 'set_fact': {'ansible_os_family': "{{ ansible_facts['distribution_file_variety'] }}", 'cacheable': 'yes'}}]} finished with status {'skipped': {}, 'ok': {'ec2-44-203-184-6.compute-1.amazonaws.com': 2}, 'dark': {}, 'failures': {}, 'ignored': {}, 'rescued': {}, 'processed': {'ec2-44-203-184-6.compute-1.amazonaws.com': 1}, 'changed': {}}[0m
[37m[2024-09-03 16:38:42] [DEBUG] PROVISIONER: OS family: Debian.[0m
[37m[2024-09-03 16:38:42] [DEBUG] PROVISIONER: Render playbook with vars: {'component': 'wazuh-manager', 'version': '4.9.0', 'live': False, 'type': 'assistant', 'dependencies': None, 'templates_path': '/home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/playbooks/wazuh/assistant/install', 'templates_order': ['download.j2', 'install.j2'], 'ansible_os_family': 'Debian'}.[0m
[37m[2024-09-03 16:38:42] [DEBUG] PROVISIONER: Templates found: ['download.j2', 'install.j2'][0m
[37m[2024-09-03 16:38:42] [DEBUG] PROVISIONER: Rendering template download.j2[0m
[37m[2024-09-03 16:38:42] [DEBUG] PROVISIONER: Rendering template install.j2[0m
[37m[2024-09-03 16:38:42] [DEBUG] PROVISIONER: [{'name': 'Install the required packages', 'shell': '\nsudo apt-get update && apt-get -y install curl\n'}, {'name': 'Download the Wazuh installation assistant', 'shell': 'curl -sO https://packages-dev.wazuh.com/4.9/wazuh-install.sh'}, {'name': 'Install wazuh-manager with assistant', 'shell': 'bash ./wazuh-install.sh -a -i'}][0m
[37m[2024-09-03 16:38:42] [DEBUG] PROVISIONER: Tasks to execute: [{'name': 'Install the required packages', 'shell': '\nsudo apt-get update && apt-get -y install curl\n'}, {'name': 'Download the Wazuh installation assistant', 'shell': 'curl -sO https://packages-dev.wazuh.com/4.9/wazuh-install.sh'}, {'name': 'Install wazuh-manager with assistant', 'shell': 'bash ./wazuh-install.sh -a -i'}].[0m
[32m[2024-09-03 16:38:42] [INFO] PROVISIONER: Execute install for wazuh-manager.[0m
[37m[2024-09-03 16:38:42] [DEBUG] PROVISIONER: Using inventory: {'all': {'hosts': {'ec2-44-203-184-6.compute-1.amazonaws.com': {'ansible_port': 2200, 'ansible_user': 'ubuntu', 'ansible_ssh_private_key_file': '/tmp/wazuh-qa/wazuh-25497-ubuntu-22.04-5123/wazuh-25497-ubuntu-22.04-key-2035'}}}}[0m
[37m[2024-09-03 16:38:42] [DEBUG] PROVISIONER: Running playbook: {'hosts': 'ec2-44-203-184-6.compute-1.amazonaws.com', 'become': True, 'gather_facts': True, 'tasks': [{'name': 'Install the required packages', 'shell': '\nsudo apt-get update && apt-get -y install curl\n'}, {'name': 'Download the Wazuh installation assistant', 'shell': 'curl -sO https://packages-dev.wazuh.com/4.9/wazuh-install.sh'}, {'name': 'Install wazuh-manager with assistant', 'shell': 'bash ./wazuh-install.sh -a -i'}]}[0m
[0;34mUsing /etc/ansible/ansible.cfg as config file[0m

PLAY [ec2-44-203-184-6.compute-1.amazonaws.com] ********************************

TASK [Gathering Facts] *********************************************************
[1;35mcore/2.17/reference_appendices/interpreter_discovery.html for more information.[0m
[0;32mok: [ec2-44-203-184-6.compute-1.amazonaws.com][0m

TASK [Install the required packages] *******************************************
[0;33mchanged: [ec2-44-203-184-6.compute-1.amazonaws.com] => changed=true [0m
[0;33m  cmd: |2-[0m
[0;33m  [0m
[0;33m    sudo apt-get update && apt-get -y install curl[0m
[0;33m  delta: '0:00:17.040938'[0m
[0;33m  end: '2024-09-03 19:39:10.091767'[0m
[0;33m  msg: ''[0m
[0;33m  rc: 0[0m
[0;33m  start: '2024-09-03 19:38:53.050829'[0m
[0;33m  stderr: ''[0m
[0;33m  stderr_lines: <omitted>[0m
[0;33m  stdout: |-[0m
[0;33m    Hit:1 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy InRelease[0m
[0;33m    Get:2 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-updates InRelease [128 kB][0m
[0;33m    Get:3 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-backports InRelease [127 kB][0m
[0;33m    Get:4 http://security.ubuntu.com/ubuntu jammy-security InRelease [129 kB][0m
[0;33m    Get:5 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy/universe amd64 Packages [14.1 MB][0m
[0;33m    Get:6 http://security.ubuntu.com/ubuntu jammy-security/main amd64 Packages [1769 kB][0m
[0;33m    Get:7 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy/universe Translation-en [5652 kB][0m
[0;33m    Get:8 http://security.ubuntu.com/ubuntu jammy-security/main Translation-en [291 kB][0m
[0;33m    Get:9 http://security.ubuntu.com/ubuntu jammy-security/main amd64 c-n-f Metadata [13.2 kB][0m
[0;33m    Get:10 http://security.ubuntu.com/ubuntu jammy-security/restricted amd64 Packages [2308 kB][0m
[0;33m    Get:11 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy/universe amd64 c-n-f Metadata [286 kB][0m
[0;33m    Get:12 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy/multiverse amd64 Packages [217 kB][0m
[0;33m    Get:13 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy/multiverse Translation-en [112 kB][0m
[0;33m    Get:14 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy/multiverse amd64 c-n-f Metadata [8372 B][0m
[0;33m    Get:15 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/main amd64 Packages [1988 kB][0m
[0;33m    Get:16 http://security.ubuntu.com/ubuntu jammy-security/restricted Translation-en [398 kB][0m
[0;33m    Get:17 http://security.ubuntu.com/ubuntu jammy-security/restricted amd64 c-n-f Metadata [572 B][0m
[0;33m    Get:18 http://security.ubuntu.com/ubuntu jammy-security/universe amd64 Packages [899 kB][0m
[0;33m    Get:19 http://security.ubuntu.com/ubuntu jammy-security/universe Translation-en [175 kB][0m
[0;33m    Get:20 http://security.ubuntu.com/ubuntu jammy-security/universe amd64 c-n-f Metadata [19.2 kB][0m
[0;33m    Get:21 http://security.ubuntu.com/ubuntu jammy-security/multiverse amd64 Packages [37.2 kB][0m
[0;33m    Get:22 http://security.ubuntu.com/ubuntu jammy-security/multiverse Translation-en [7588 B][0m
[0;33m    Get:23 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/main Translation-en [349 kB][0m
[0;33m    Get:24 http://security.ubuntu.com/ubuntu jammy-security/multiverse amd64 c-n-f Metadata [228 B][0m
[0;33m    Get:25 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/main amd64 c-n-f Metadata [17.8 kB][0m
[0;33m    Get:26 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/restricted amd64 Packages [2386 kB][0m
[0;33m    Get:27 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/restricted Translation-en [410 kB][0m
[0;33m    Get:28 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/restricted amd64 c-n-f Metadata [616 B][0m
[0;33m    Get:29 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/universe amd64 Packages [1121 kB][0m
[0;33m    Get:30 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/universe Translation-en [260 kB][0m
[0;33m    Get:31 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/universe amd64 c-n-f Metadata [26.1 kB][0m
[0;33m    Get:32 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/multiverse amd64 Packages [43.3 kB][0m
[0;33m    Get:33 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/multiverse Translation-en [10.8 kB][0m
[0;33m    Get:34 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/multiverse amd64 c-n-f Metadata [444 B][0m
[0;33m    Get:35 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-backports/main amd64 Packages [67.8 kB][0m
[0;33m    Get:36 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-backports/main Translation-en [11.1 kB][0m
[0;33m    Get:37 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-backports/main amd64 c-n-f Metadata [388 B][0m
[0;33m    Get:38 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-backports/restricted amd64 c-n-f Metadata [116 B][0m
[0;33m    Get:39 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-backports/universe amd64 Packages [28.8 kB][0m
[0;33m    Get:40 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-backports/universe Translation-en [16.5 kB][0m
[0;33m    Get:41 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-backports/universe amd64 c-n-f Metadata [672 B][0m
[0;33m    Get:42 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-backports/multiverse amd64 c-n-f Metadata [116 B][0m
[0;33m    Fetched 33.4 MB in 3s (9940 kB/s)[0m
[0;33m    Reading package lists...[0m
[0;33m    Reading package lists...[0m
[0;33m    Building dependency tree...[0m
[0;33m    Reading state information...[0m
[0;33m    The following additional packages will be installed:[0m
[0;33m      libcurl4[0m
[0;33m    The following packages will be upgraded:[0m
[0;33m      curl libcurl4[0m
[0;33m    2 upgraded, 0 newly installed, 0 to remove and 214 not upgraded.[0m
[0;33m    Need to get 484 kB of archives.[0m
[0;33m    After this operation, 0 B of additional disk space will be used.[0m
[0;33m    Get:1 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/main amd64 curl amd64 7.81.0-1ubuntu1.17 [194 kB][0m
[0;33m    Get:2 http://us-east-1.ec2.archive.ubuntu.com/ubuntu jammy-updates/main amd64 libcurl4 amd64 7.81.0-1ubuntu1.17 [290 kB][0m
[0;33m    Fetched 484 kB in 0s (19.6 MB/s)[0m
[0;33m    (Reading database ... (Reading database ... 5%(Reading database ... 10%(Reading database ... 15%(Reading database ... 20%(Reading database ... 25%(Reading database ... 30%(Reading database ... 35%(Reading database ... 40%(Reading database ... 45%(Reading database ... 50%(Reading database ... 55%(Reading database ... 60%(Reading database ... 65%(Reading database ... 70%(Reading database ... 75%(Reading database ... 80%(Reading database ... 85%(Reading database ... 90%(Reading database ... 95%(Reading database ... 100%(Reading database ... 64295 files and directories currently installed.)[0m
[0;33m    Preparing to unpack .../curl_7.81.0-1ubuntu1.17_amd64.deb ...[0m
[0;33m    Unpacking curl (7.81.0-1ubuntu1.17) over (7.81.0-1ubuntu1.10) ...[0m
[0;33m    Preparing to unpack .../libcurl4_7.81.0-1ubuntu1.17_amd64.deb ...[0m
[0;33m    Unpacking libcurl4:amd64 (7.81.0-1ubuntu1.17) over (7.81.0-1ubuntu1.10) ...[0m
[0;33m    Setting up libcurl4:amd64 (7.81.0-1ubuntu1.17) ...[0m
[0;33m    Setting up curl (7.81.0-1ubuntu1.17) ...[0m
[0;33m    Processing triggers for man-db (2.10.2-1) ...[0m
[0;33m    Processing triggers for libc-bin (2.35-0ubuntu3.1) ...[0m
[0;33m  stdout_lines: <omitted>[0m

TASK [Download the Wazuh installation assistant] *******************************
[0;33mchanged: [ec2-44-203-184-6.compute-1.amazonaws.com] => changed=true [0m
[0;33m  cmd: curl -sO https://packages-dev.wazuh.com/4.9/wazuh-install.sh[0m
[0;33m  delta: '0:00:00.374692'[0m
[0;33m  end: '2024-09-03 19:39:15.791424'[0m
[0;33m  msg: ''[0m
[0;33m  rc: 0[0m
[0;33m  start: '2024-09-03 19:39:15.416732'[0m
[0;33m  stderr: ''[0m
[0;33m  stderr_lines: <omitted>[0m
[0;33m  stdout: ''[0m
[0;33m  stdout_lines: <omitted>[0m

TASK [Install wazuh-manager with assistant] ************************************
[0;33mchanged: [ec2-44-203-184-6.compute-1.amazonaws.com] => changed=true [0m
[0;33m  cmd: bash ./wazuh-install.sh -a -i[0m
[0;33m  delta: '0:06:40.622224'[0m
[0;33m  end: '2024-09-03 19:46:00.381498'[0m
[0;33m  msg: ''[0m
[0;33m  rc: 0[0m
[0;33m  start: '2024-09-03 19:39:19.759274'[0m
[0;33m  stderr: ''[0m
[0;33m  stderr_lines: <omitted>[0m
[0;33m  stdout: |-[0m
[0;33m    03/09/2024 19:39:19 INFO: Starting Wazuh installation assistant. Wazuh version: 4.9.0[0m
[0;33m    03/09/2024 19:39:19 INFO: Verbose logging redirected to /var/log/wazuh-install.log[0m
[0;33m    03/09/2024 19:39:24 WARNING: Hardware checks ignored.[0m
[0;33m    03/09/2024 19:39:24 INFO: Wazuh web interface port will be 443.[0m
[0;33m    03/09/2024 19:39:28 INFO: --- Dependencies ----[0m
[0;33m    03/09/2024 19:39:28 INFO: Installing apt-transport-https.[0m
[0;33m    03/09/2024 19:39:33 INFO: Installing debhelper.[0m
[0;33m    03/09/2024 19:40:03 INFO: Wazuh development repository added.[0m
[0;33m    03/09/2024 19:40:03 INFO: --- Configuration files ---[0m
[0;33m    03/09/2024 19:40:03 INFO: Generating configuration files.[0m
[0;33m    03/09/2024 19:40:03 INFO: Generating the root certificate.[0m
[0;33m    03/09/2024 19:40:03 INFO: Generating Admin certificates.[0m
[0;33m    03/09/2024 19:40:03 INFO: Generating Wazuh indexer certificates.[0m
[0;33m    03/09/2024 19:40:04 INFO: Generating Filebeat certificates.[0m
[0;33m    03/09/2024 19:40:04 INFO: Generating Wazuh dashboard certificates.[0m
[0;33m    03/09/2024 19:40:05 INFO: Created wazuh-install-files.tar. It contains the Wazuh cluster key, certificates, and passwords necessary for installation.[0m
[0;33m    03/09/2024 19:40:05 INFO: --- Wazuh indexer ---[0m
[0;33m    03/09/2024 19:40:05 INFO: Starting Wazuh indexer installation.[0m
[0;33m    03/09/2024 19:40:42 INFO: Wazuh indexer installation finished.[0m
[0;33m    03/09/2024 19:40:42 INFO: Wazuh indexer post-install configuration finished.[0m
[0;33m    03/09/2024 19:40:42 INFO: Starting service wazuh-indexer.[0m
[0;33m    03/09/2024 19:40:54 INFO: wazuh-indexer service started.[0m
[0;33m    03/09/2024 19:40:54 INFO: Initializing Wazuh indexer cluster security settings.[0m
[0;33m    03/09/2024 19:40:58 INFO: Wazuh indexer cluster security configuration initialized.[0m
[0;33m    03/09/2024 19:40:58 INFO: Wazuh indexer cluster initialized.[0m
[0;33m    03/09/2024 19:40:58 INFO: --- Wazuh server ---[0m
[0;33m    03/09/2024 19:40:58 INFO: Starting the Wazuh manager installation.[0m
[0;33m    03/09/2024 19:42:16 INFO: Wazuh manager installation finished.[0m
[0;33m    03/09/2024 19:42:16 INFO: Wazuh manager vulnerability detection configuration finished.[0m
[0;33m    03/09/2024 19:42:16 INFO: Starting service wazuh-manager.[0m
[0;33m    03/09/2024 19:42:32 INFO: wazuh-manager service started.[0m
[0;33m    03/09/2024 19:42:32 INFO: Starting Filebeat installation.[0m
[0;33m    03/09/2024 19:42:43 INFO: Filebeat installation finished.[0m
[0;33m    03/09/2024 19:42:44 INFO: Filebeat post-install configuration finished.[0m
[0;33m    03/09/2024 19:42:44 INFO: Starting service filebeat.[0m
[0;33m    03/09/2024 19:42:45 INFO: filebeat service started.[0m
[0;33m    03/09/2024 19:42:45 INFO: --- Wazuh dashboard ---[0m
[0;33m    03/09/2024 19:42:45 INFO: Starting Wazuh dashboard installation.[0m
[0;33m    03/09/2024 19:45:19 INFO: Wazuh dashboard installation finished.[0m
[0;33m    03/09/2024 19:45:19 INFO: Wazuh dashboard post-install configuration finished.[0m
[0;33m    03/09/2024 19:45:19 INFO: Starting service wazuh-dashboard.[0m
[0;33m    03/09/2024 19:45:20 INFO: wazuh-dashboard service started.[0m
[0;33m    03/09/2024 19:45:21 INFO: Updating the internal users.[0m
[0;33m    03/09/2024 19:45:24 INFO: A backup of the internal users has been saved in the /etc/wazuh-indexer/internalusers-backup folder.[0m
[0;33m    03/09/2024 19:45:31 INFO: The filebeat.yml file has been updated to use the Filebeat Keystore username and password.[0m
[0;33m    03/09/2024 19:45:59 INFO: Initializing Wazuh dashboard web application.[0m
[0;33m    03/09/2024 19:46:00 INFO: Wazuh dashboard web application initialized.[0m
[0;33m    03/09/2024 19:46:00 INFO: --- Summary ---[0m
[0;33m    03/09/2024 19:46:00 INFO: You can access the web interface https://<wazuh-dashboard-ip>:443[0m
[0;33m        User: admin[0m
[0;33m        Password: jtrORDti?*b9e+wP2nnkaIH5JcPT+Naw[0m
[0;33m    03/09/2024 19:46:00 INFO: Installation finished.[0m
[0;33m  stdout_lines: <omitted>[0m

PLAY RECAP *********************************************************************
[0;33mec2-44-203-184-6.compute-1.amazonaws.com[0m : [0;32mok=4   [0m [0;33mchanged=3   [0m unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
[37m[2024-09-03 16:46:01] [DEBUG] PROVISIONER: Playbook {'hosts': 'ec2-44-203-184-6.compute-1.amazonaws.com', 'become': True, 'gather_facts': True, 'tasks': [{'name': 'Install the required packages', 'shell': '\nsudo apt-get update && apt-get -y install curl\n'}, {'name': 'Download the Wazuh installation assistant', 'shell': 'curl -sO https://packages-dev.wazuh.com/4.9/wazuh-install.sh'}, {'name': 'Install wazuh-manager with assistant', 'shell': 'bash ./wazuh-install.sh -a -i'}]} finished with status {'skipped': {}, 'ok': {'ec2-44-203-184-6.compute-1.amazonaws.com': 4}, 'dark': {}, 'failures': {}, 'ignored': {}, 'rescued': {}, 'processed': {'ec2-44-203-184-6.compute-1.amazonaws.com': 1}, 'changed': {'ec2-44-203-184-6.compute-1.amazonaws.com': 3}}[0m
[32m[2024-09-03 16:46:01] [INFO] PROVISIONER: Provision of "wazuh-manager" complete successfully.[0m
[32m[2024-09-03 16:46:01] [INFO] PROVISIONER: All components provisioned successfully.[0m
[37m[2024-09-03 16:46:01] [DEBUG] PROVISIONER: Provision summary: {'skipped': {}, 'ok': {'ec2-44-203-184-6.compute-1.amazonaws.com': 4}, 'dark': {}, 'failures': {}, 'ignored': {}, 'rescued': {}, 'processed': {'ec2-44-203-184-6.compute-1.amazonaws.com': 1}, 'changed': {'ec2-44-203-184-6.compute-1.amazonaws.com': 3}}[0m
[0m
[32m[2024-09-03 16:46:01] [INFO] [1671171] [ThreadPoolExecutor-0_0] [jobflow]: [provision-manager-linux-ubuntu-22.04-amd64] Finished task in 450.13 seconds.[0m
[32m[2024-09-03 16:46:01] [INFO] [1671171] [ThreadPoolExecutor-0_0] [jobflow]: [allocate-macos-agent-macos-ventura-13-amd64] Starting task.[0m
[36m[2024-09-03 16:46:01] [DEBUG] [1671171] [ThreadPoolExecutor-0_0] [jobflow]: Running task "allocate-macos-agent-macos-ventura-13-amd64" with arguments: ['modules/allocation/main.py', '--action=create', '--provider=vagrant', '--size=small', '--composite-name=macos-ventura-13-amd64', '--inventory-output=/tmp/dtt1-poc/agent-macos-ventura-13-amd64/inventory.yaml', '--track-output=/tmp/dtt1-poc/agent-macos-ventura-13-amd64/track.yaml', '--label-termination-date=1d', '--label-team=qa', '--label-issue=https://github.com/wazuh/wazuh/issues/25497'][0m
[36m[2024-09-03 16:49:31] [DEBUG] [1671171] [ThreadPoolExecutor-0_0] [jobflow]: Finished task "allocate-macos-agent-macos-ventura-13-amd64" execution with result:
[37m[2024-09-03 16:46:01] [DEBUG] SPNEGO._GSS: Python gssapi not available, cannot use any GSSAPIProxy protocols: No module named 'gssapi'[0m
[37m[2024-09-03 16:46:01] [DEBUG] SPNEGO._GSS: Python gssapi IOV extension not available: No module named 'gssapi'[0m
[32m[2024-09-03 16:46:01] [INFO] ALLOCATOR: Creating instance at /tmp/wazuh-qa[0m
[32m[2024-09-03 16:46:18] [INFO] ALLOCATOR: Using the macStadium Intel server to deploy.[0m
[37m[2024-09-03 16:46:18] [DEBUG] ALLOCATOR: Checking if instance directory exists on remote host[0m
[37m[2024-09-03 16:46:23] [DEBUG] ALLOCATOR: Creating instance directory on remote host[0m
[37m[2024-09-03 16:46:29] [DEBUG] ALLOCATOR: No config provided. Generating from payload[0m
[37m[2024-09-03 16:46:29] [DEBUG] ALLOCATOR: Generating new key pair[0m
[37m[2024-09-03 16:46:32] [DEBUG] ALLOCATOR: Vagrantfile created. Creating instance.[0m
[32m[2024-09-03 16:46:49] [INFO] ALLOCATOR: Instance wazuh-25497-ventura-13-1230 created.[0m
[32m[2024-09-03 16:48:41] [INFO] ALLOCATOR: Instance wazuh-25497-ventura-13-1230 started.[0m
[32m[2024-09-03 16:49:27] [INFO] ALLOCATOR: The inventory file generated at /tmp/dtt1-poc/agent-macos-ventura-13-amd64/inventory.yaml[0m
[32m[2024-09-03 16:49:27] [INFO] ALLOCATOR: The track file generated at /tmp/dtt1-poc/agent-macos-ventura-13-amd64/track.yaml[0m
[32m[2024-09-03 16:49:31] [INFO] ALLOCATOR: SSH connection successful.[0m
[32m[2024-09-03 16:49:31] [INFO] ALLOCATOR: Instance wazuh-25497-ventura-13-1230 created successfully.[0m
[0m
[32m[2024-09-03 16:49:31] [INFO] [1671171] [ThreadPoolExecutor-0_0] [jobflow]: [allocate-macos-agent-macos-ventura-13-amd64] Finished task in 210.62 seconds.[0m
[32m[2024-09-03 16:49:31] [INFO] [1671171] [ThreadPoolExecutor-0_0] [jobflow]: [run-macos-agent-macos-ventura-13-amd64-tests] Starting task.[0m
[36m[2024-09-03 16:49:31] [DEBUG] [1671171] [ThreadPoolExecutor-0_0] [jobflow]: Running task "run-macos-agent-macos-ventura-13-amd64-tests" with arguments: ['modules/testing/main.py', "--targets={'wazuh-1': '/tmp/dtt1-poc/manager-linux-ubuntu-22.04-amd64/inventory.yaml'}", "--targets={'agent': '/tmp/dtt1-poc/agent-macos-ventura-13-amd64/inventory.yaml'}", '--tests=install,registration,connection,basic_info,restart,stop,uninstall', '--component=agent', '--wazuh-version=4.9.0', '--wazuh-revision=40907', '--live=False'][0m
[36m[2024-09-03 17:00:00] [DEBUG] [1671171] [ThreadPoolExecutor-0_0] [jobflow]: Finished task "run-macos-agent-macos-ventura-13-amd64-tests" execution with result:
[37m[2024-09-03 16:49:32] [DEBUG] SPNEGO._GSS: Python gssapi not available, cannot use any GSSAPIProxy protocols: No module named 'gssapi'[0m
[37m[2024-09-03 16:49:32] [DEBUG] SPNEGO._GSS: Python gssapi IOV extension not available: No module named 'gssapi'[0m
[32m[2024-09-03 16:49:32] [INFO] TESTER: Running tests for ec2-44-203-184-6.compute-1.amazonaws.com[0m
[32m[2024-09-03 16:49:32] [INFO] TESTER: Running tests for 10.10.0.249[0m
[37m[2024-09-03 16:49:32] [DEBUG] TESTER: Using extra vars: {'component': 'agent', 'wazuh_version': '4.9.0', 'wazuh_revision': '40907', 'wazuh_branch': None, 'working_dir': '/tmp/tests', 'live': False, 'hosts_ip': ['ec2-44-203-184-6.compute-1.amazonaws.com', '10.10.0.249'], 'targets': '{wazuh-1: /tmp/dtt1-poc/manager-linux-ubuntu-22.04-amd64/inventory.yaml, agent: /tmp/dtt1-poc/agent-macos-ventura-13-amd64/inventory.yaml}', 'dependencies': '{}', 'local_host_path': '/home/fcaffieri/repos/wazuh-qa/deployability', 'current_user': 'fcaffieri'}[0m
[37m[2024-09-03 16:49:32] [DEBUG] TESTER: Using inventory: {'all': {'hosts': {'ec2-44-203-184-6.compute-1.amazonaws.com': {'ansible_port': 2200, 'ansible_user': 'ubuntu', 'ansible_ssh_private_key_file': '/tmp/wazuh-qa/wazuh-25497-ubuntu-22.04-5123/wazuh-25497-ubuntu-22.04-key-2035'}}}}[0m
[37m[2024-09-03 16:49:32] [DEBUG] TESTER: Running playbook: /home/fcaffieri/repos/wazuh-qa/deployability/modules/testing/playbooks/setup.yml[0m
[0;34mUsing /etc/ansible/ansible.cfg as config file[0m

PLAY [localhost] ***************************************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [localhost][0m

TASK [Cleaning old key ssh-keygen registries] **********************************
[0;33mchanged: [localhost] => (item=ec2-44-203-184-6.compute-1.amazonaws.com) => changed=true [0m
[0;33m  ansible_loop_var: item[0m
[0;33m  cmd:[0m
[0;33m  - ssh-keygen[0m
[0;33m  - -f[0m
[0;33m  - ~/.ssh/known_hosts[0m
[0;33m  - -R[0m
[0;33m  - ec2-44-203-184-6.compute-1.amazonaws.com[0m
[0;33m  delta: '0:00:00.004666'[0m
[0;33m  end: '2024-09-03 16:49:34.389017'[0m
[0;33m  item: ec2-44-203-184-6.compute-1.amazonaws.com[0m
[0;33m  msg: ''[0m
[0;33m  rc: 0[0m
[0;33m  start: '2024-09-03 16:49:34.384351'[0m
[0;33m  stderr: Host ec2-44-203-184-6.compute-1.amazonaws.com not found in /home/fcaffieri/.ssh/known_hosts[0m
[0;33m  stderr_lines: <omitted>[0m
[0;33m  stdout: ''[0m
[0;33m  stdout_lines: <omitted>[0m
[0;33mchanged: [localhost] => (item=10.10.0.249) => changed=true [0m
[0;33m  ansible_loop_var: item[0m
[0;33m  cmd:[0m
[0;33m  - ssh-keygen[0m
[0;33m  - -f[0m
[0;33m  - ~/.ssh/known_hosts[0m
[0;33m  - -R[0m
[0;33m  - 10.10.0.249[0m
[0;33m  delta: '0:00:00.015809'[0m
[0;33m  end: '2024-09-03 16:49:34.576739'[0m
[0;33m  item: 10.10.0.249[0m
[0;33m  msg: ''[0m
[0;33m  rc: 0[0m
[0;33m  start: '2024-09-03 16:49:34.560930'[0m
[0;33m  stderr: ''[0m
[0;33m  stderr_lines: <omitted>[0m
[0;33m  stdout: |-[0m
[0;33m    # Host 10.10.0.249 found: line 153[0m
[0;33m    /home/fcaffieri/.ssh/known_hosts updated.[0m
[0;33m    Original contents retained as /home/fcaffieri/.ssh/known_hosts.old[0m
[0;33m  stdout_lines: <omitted>[0m

PLAY RECAP *********************************************************************
[0;33mlocalhost[0m                  : [0;32mok=2   [0m [0;33mchanged=1   [0m unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
[37m[2024-09-03 16:49:34] [DEBUG] TESTER: Playbook /home/fcaffieri/repos/wazuh-qa/deployability/modules/testing/playbooks/setup.yml finished with status {'skipped': {}, 'ok': {'localhost': 2}, 'dark': {}, 'failures': {}, 'ignored': {}, 'rescued': {}, 'processed': {'localhost': 1}, 'changed': {'localhost': 1}}[0m
[37m[2024-09-03 16:49:34] [DEBUG] TESTER: Using inventory: {'all': {'hosts': {'ec2-44-203-184-6.compute-1.amazonaws.com': {'ansible_port': 2200, 'ansible_user': 'ubuntu', 'ansible_ssh_private_key_file': '/tmp/wazuh-qa/wazuh-25497-ubuntu-22.04-5123/wazuh-25497-ubuntu-22.04-key-2035'}}}}[0m
[37m[2024-09-03 16:49:34] [DEBUG] TESTER: Running playbook: /home/fcaffieri/repos/wazuh-qa/deployability/modules/testing/playbooks/test.yml[0m
[0;34mUsing /etc/ansible/ansible.cfg as config file[0m

PLAY [localhost] ***************************************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [localhost][0m

TASK [Test install for agent] **************************************************
[0;33mchanged: [localhost] => changed=true [0m
[0;33m  cmd:[0m
[0;33m  - python3[0m
[0;33m  - -m[0m
[0;33m  - pytest[0m
[0;33m  - modules/testing/tests/test_agent/test_install.py[0m
[0;33m  - -v[0m
[0;33m  - --wazuh_version=4.9.0[0m
[0;33m  - --wazuh_revision=40907[0m
[0;33m  - --component=agent[0m
[0;33m  - --dependencies={}[0m
[0;33m  - '--targets={wazuh-1: /tmp/dtt1-poc/manager-linux-ubuntu-22.04-amd64/inventory.yaml, agent: /tmp/dtt1-poc/agent-macos-ventura-13-amd64/inventory.yaml}'[0m
[0;33m  - --live=False[0m
[0;33m  - -s[0m
[0;33m  delta: '0:00:57.540739'[0m
[0;33m  end: '2024-09-03 16:50:34.425090'[0m
[0;33m  msg: ''[0m
[0;33m  rc: 0[0m
[0;33m  start: '2024-09-03 16:49:36.884351'[0m
[0;33m  stderr: |-[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m  stderr_lines: <omitted>[0m
[0;33m  stdout: |-[0m
[0;33m    [37m[2024-09-03 16:49:37] [DEBUG] SPNEGO._GSS: Python gssapi not available, cannot use any GSSAPIProxy protocols: No module named 'gssapi'[0m[0m
[0;33m    [37m[2024-09-03 16:49:37] [DEBUG] SPNEGO._GSS: Python gssapi IOV extension not available: No module named 'gssapi'[0m[0m
[0;33m    ============================= test session starts ==============================[0m
[0;33m    platform linux -- Python 3.10.14, pytest-7.4.4, pluggy-1.5.0 -- /home/fcaffieri/repos/wazuh-qa/.venv/bin/python3[0m
[0;33m    cachedir: .pytest_cache[0m
[0;33m    rootdir: /home/fcaffieri/repos/wazuh-qa/deployability/modules[0m
[0;33m    collecting ... collected 2 items[0m
[0;33m  [0m
[0;33m    modules/testing/tests/test_agent/test_install.py::test_installation [32m[2024-09-03 16:49:37] [INFO] TESTER: Checking connection to ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:49:42] [INFO] TESTER: Connection established successfully in ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:49:47] [INFO] TESTER: Checking connection to ubuntu-22.04[0m[0m
[0;33m    [32m[2024-09-03 16:49:49] [INFO] TESTER: Connection established successfully in ubuntu-22.04[0m[0m
[0;33m    [32m[2024-09-03 16:49:49] [INFO] TESTER: Firewall disabled on ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:49:57] [INFO] TESTER: Manager is already installed in ubuntu-22.04[0m[0m
[0;33m    [32m[2024-09-03 16:49:59] [INFO] TESTER: Installing Agent in ventura-13[0m[0m
[0;33m    PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_install.py::test_status [32m[2024-09-03 16:50:29] [INFO] TESTER: Getting status of ventura-13[0m[0m
[0;33m    PASSED[0m
[0;33m  [0m
[0;33m    =============================== warnings summary ===============================[0m
[0;33m    modules/provision/models.py:36[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:36: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('dependencies', pre=True)[0m
[0;33m  [0m
[0;33m    modules/provision/models.py:64[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:64: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('install', 'uninstall', pre=True)[0m
[0;33m  [0m
[0;33m    -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html[0m
[0;33m    ======================== 2 passed, 2 warnings in 56.61s ========================[0m
[0;33m  stdout_lines: <omitted>[0m

PLAY RECAP *********************************************************************
[0;33mlocalhost[0m                  : [0;32mok=2   [0m [0;33mchanged=1   [0m unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
[37m[2024-09-03 16:50:34] [DEBUG] TESTER: Playbook /home/fcaffieri/repos/wazuh-qa/deployability/modules/testing/playbooks/test.yml finished with status {'skipped': {}, 'ok': {'localhost': 2}, 'dark': {}, 'failures': {}, 'ignored': {}, 'rescued': {}, 'processed': {'localhost': 1}, 'changed': {'localhost': 1}}[0m
[32m[2024-09-03 16:50:34] [INFO] TESTER: Test install Finished with: [0;34mUsing /etc/ansible/ansible.cfg as config file[0m
[32m[2024-09-03 16:50:34] [INFO] TESTER: Test install Finished with: [0m
[32m[2024-09-03 16:50:34] [INFO] TESTER: Test install Finished with: 
PLAY [localhost] ***************************************************************[0m
[32m[2024-09-03 16:50:34] [INFO] TESTER: Test install Finished with: 
TASK [Gathering Facts] *********************************************************[0m
[32m[2024-09-03 16:50:34] [INFO] TESTER: Test install Finished with: [0m
[32m[2024-09-03 16:50:34] [INFO] TESTER: Test install Finished with: [0;32mok: [localhost][0m
[32m[2024-09-03 16:50:34] [INFO] TESTER: Test install Finished with: 
TASK [Test install for agent] **************************************************[0m
[32m[2024-09-03 16:50:34] [INFO] TESTER: Test install Finished with: [0m
[32m[2024-09-03 16:50:34] [INFO] TESTER: Test install Finished with: [0;33mchanged: [localhost] => changed=true [0m
[0;33m  cmd:[0m
[0;33m  - python3[0m
[0;33m  - -m[0m
[0;33m  - pytest[0m
[0;33m  - modules/testing/tests/test_agent/test_install.py[0m
[0;33m  - -v[0m
[0;33m  - --wazuh_version=4.9.0[0m
[0;33m  - --wazuh_revision=40907[0m
[0;33m  - --component=agent[0m
[0;33m  - --dependencies={}[0m
[0;33m  - '--targets={wazuh-1: /tmp/dtt1-poc/manager-linux-ubuntu-22.04-amd64/inventory.yaml, agent: /tmp/dtt1-poc/agent-macos-ventura-13-amd64/inventory.yaml}'[0m
[0;33m  - --live=False[0m
[0;33m  - -s[0m
[0;33m  delta: '0:00:57.540739'[0m
[0;33m  end: '2024-09-03 16:50:34.425090'[0m
[0;33m  msg: ''[0m
[0;33m  rc: 0[0m
[0;33m  start: '2024-09-03 16:49:36.884351'[0m
[0;33m  stderr: |-[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m  stderr_lines: <omitted>[0m
[0;33m  stdout: |-[0m
[0;33m    [37m[2024-09-03 16:49:37] [DEBUG] SPNEGO._GSS: Python gssapi not available, cannot use any GSSAPIProxy protocols: No module named 'gssapi'[0m[0m
[0;33m    [37m[2024-09-03 16:49:37] [DEBUG] SPNEGO._GSS: Python gssapi IOV extension not available: No module named 'gssapi'[0m[0m
[0;33m    ============================= test session starts ==============================[0m
[0;33m    platform linux -- Python 3.10.14, pytest-7.4.4, pluggy-1.5.0 -- /home/fcaffieri/repos/wazuh-qa/.venv/bin/python3[0m
[0;33m    cachedir: .pytest_cache[0m
[0;33m    rootdir: /home/fcaffieri/repos/wazuh-qa/deployability/modules[0m
[0;33m    collecting ... collected 2 items[0m
[0;33m  [0m
[0;33m    modules/testing/tests/test_agent/test_install.py::test_installation [32m[2024-09-03 16:49:37] [INFO] TESTER: Checking connection to ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:49:42] [INFO] TESTER: Connection established successfully in ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:49:47] [INFO] TESTER: Checking connection to ubuntu-22.04[0m[0m
[0;33m    [32m[2024-09-03 16:49:49] [INFO] TESTER: Connection established successfully in ubuntu-22.04[0m[0m
[0;33m    [32m[2024-09-03 16:49:49] [INFO] TESTER: Firewall disabled on ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:49:57] [INFO] TESTER: Manager is already installed in ubuntu-22.04[0m[0m
[0;33m    [32m[2024-09-03 16:49:59] [INFO] TESTER: Installing Agent in ventura-13[0m[0m
[0;33m    PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_install.py::test_status [32m[2024-09-03 16:50:29] [INFO] TESTER: Getting status of ventura-13[0m[0m
[0;33m    PASSED[0m
[0;33m  [0m
[0;33m    =============================== warnings summary ===============================[0m
[0;33m    modules/provision/models.py:36[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:36: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('dependencies', pre=True)[0m
[0;33m  [0m
[0;33m    modules/provision/models.py:64[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:64: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('install', 'uninstall', pre=True)[0m
[0;33m  [0m
[0;33m    -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html[0m
[0;33m    ======================== 2 passed, 2 warnings in 56.61s ========================[0m
[0;33m  stdout_lines: <omitted>[0m
[32m[2024-09-03 16:50:34] [INFO] TESTER: Test install Finished with: 
PLAY RECAP *********************************************************************
[0;33mlocalhost[0m                  : [0;32mok=2   [0m [0;33mchanged=1   [0m unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   [0m
[37m[2024-09-03 16:50:34] [DEBUG] TESTER: Using inventory: {'all': {'hosts': {'ec2-44-203-184-6.compute-1.amazonaws.com': {'ansible_port': 2200, 'ansible_user': 'ubuntu', 'ansible_ssh_private_key_file': '/tmp/wazuh-qa/wazuh-25497-ubuntu-22.04-5123/wazuh-25497-ubuntu-22.04-key-2035'}}}}[0m
[37m[2024-09-03 16:50:34] [DEBUG] TESTER: Running playbook: /home/fcaffieri/repos/wazuh-qa/deployability/modules/testing/playbooks/test.yml[0m
[0;34mUsing /etc/ansible/ansible.cfg as config file[0m

PLAY [localhost] ***************************************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [localhost][0m

TASK [Test registration for agent] *********************************************
[0;33mchanged: [localhost] => changed=true [0m
[0;33m  cmd:[0m
[0;33m  - python3[0m
[0;33m  - -m[0m
[0;33m  - pytest[0m
[0;33m  - modules/testing/tests/test_agent/test_registration.py[0m
[0;33m  - -v[0m
[0;33m  - --wazuh_version=4.9.0[0m
[0;33m  - --wazuh_revision=40907[0m
[0;33m  - --component=agent[0m
[0;33m  - --dependencies={}[0m
[0;33m  - '--targets={wazuh-1: /tmp/dtt1-poc/manager-linux-ubuntu-22.04-amd64/inventory.yaml, agent: /tmp/dtt1-poc/agent-macos-ventura-13-amd64/inventory.yaml}'[0m
[0;33m  - --live=False[0m
[0;33m  - -s[0m
[0;33m  delta: '0:01:20.315132'[0m
[0;33m  end: '2024-09-03 16:51:57.060896'[0m
[0;33m  msg: ''[0m
[0;33m  rc: 0[0m
[0;33m  start: '2024-09-03 16:50:36.745764'[0m
[0;33m  stderr: |-[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m  stderr_lines: <omitted>[0m
[0;33m  stdout: |-[0m
[0;33m    [37m[2024-09-03 16:50:37] [DEBUG] SPNEGO._GSS: Python gssapi not available, cannot use any GSSAPIProxy protocols: No module named 'gssapi'[0m[0m
[0;33m    [37m[2024-09-03 16:50:37] [DEBUG] SPNEGO._GSS: Python gssapi IOV extension not available: No module named 'gssapi'[0m[0m
[0;33m    ============================= test session starts ==============================[0m
[0;33m    platform linux -- Python 3.10.14, pytest-7.4.4, pluggy-1.5.0 -- /home/fcaffieri/repos/wazuh-qa/.venv/bin/python3[0m
[0;33m    cachedir: .pytest_cache[0m
[0;33m    rootdir: /home/fcaffieri/repos/wazuh-qa/deployability/modules[0m
[0;33m    collecting ... collected 4 items[0m
[0;33m  [0m
[0;33m    modules/testing/tests/test_agent/test_registration.py::test_status [32m[2024-09-03 16:50:37] [INFO] TESTER: Checking connection to ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:50:41] [INFO] TESTER: Connection established successfully in ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:50:46] [INFO] TESTER: Registering agent in ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:51:11] [INFO] TESTER: Getting status of ventura-13[0m[0m
[0;33m    PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_registration.py::test_service PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_registration.py::test_connection PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_registration.py::test_clientKeys PASSED[0m
[0;33m  [0m
[0;33m    =============================== warnings summary ===============================[0m
[0;33m    modules/provision/models.py:36[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:36: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('dependencies', pre=True)[0m
[0;33m  [0m
[0;33m    modules/provision/models.py:64[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:64: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('install', 'uninstall', pre=True)[0m
[0;33m  [0m
[0;33m    -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html[0m
[0;33m    =================== 4 passed, 2 warnings in 79.60s (0:01:19) ===================[0m
[0;33m  stdout_lines: <omitted>[0m

PLAY RECAP *********************************************************************
[0;33mlocalhost[0m                  : [0;32mok=2   [0m [0;33mchanged=1   [0m unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
[37m[2024-09-03 16:51:57] [DEBUG] TESTER: Playbook /home/fcaffieri/repos/wazuh-qa/deployability/modules/testing/playbooks/test.yml finished with status {'skipped': {}, 'ok': {'localhost': 2}, 'dark': {}, 'failures': {}, 'ignored': {}, 'rescued': {}, 'processed': {'localhost': 1}, 'changed': {'localhost': 1}}[0m
[32m[2024-09-03 16:51:57] [INFO] TESTER: Test registration Finished with: [0;34mUsing /etc/ansible/ansible.cfg as config file[0m
[32m[2024-09-03 16:51:57] [INFO] TESTER: Test registration Finished with: [0m
[32m[2024-09-03 16:51:57] [INFO] TESTER: Test registration Finished with: 
PLAY [localhost] ***************************************************************[0m
[32m[2024-09-03 16:51:57] [INFO] TESTER: Test registration Finished with: 
TASK [Gathering Facts] *********************************************************[0m
[32m[2024-09-03 16:51:57] [INFO] TESTER: Test registration Finished with: [0m
[32m[2024-09-03 16:51:57] [INFO] TESTER: Test registration Finished with: [0;32mok: [localhost][0m
[32m[2024-09-03 16:51:57] [INFO] TESTER: Test registration Finished with: 
TASK [Test registration for agent] *********************************************[0m
[32m[2024-09-03 16:51:57] [INFO] TESTER: Test registration Finished with: [0m
[32m[2024-09-03 16:51:57] [INFO] TESTER: Test registration Finished with: [0;33mchanged: [localhost] => changed=true [0m
[0;33m  cmd:[0m
[0;33m  - python3[0m
[0;33m  - -m[0m
[0;33m  - pytest[0m
[0;33m  - modules/testing/tests/test_agent/test_registration.py[0m
[0;33m  - -v[0m
[0;33m  - --wazuh_version=4.9.0[0m
[0;33m  - --wazuh_revision=40907[0m
[0;33m  - --component=agent[0m
[0;33m  - --dependencies={}[0m
[0;33m  - '--targets={wazuh-1: /tmp/dtt1-poc/manager-linux-ubuntu-22.04-amd64/inventory.yaml, agent: /tmp/dtt1-poc/agent-macos-ventura-13-amd64/inventory.yaml}'[0m
[0;33m  - --live=False[0m
[0;33m  - -s[0m
[0;33m  delta: '0:01:20.315132'[0m
[0;33m  end: '2024-09-03 16:51:57.060896'[0m
[0;33m  msg: ''[0m
[0;33m  rc: 0[0m
[0;33m  start: '2024-09-03 16:50:36.745764'[0m
[0;33m  stderr: |-[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m  stderr_lines: <omitted>[0m
[0;33m  stdout: |-[0m
[0;33m    [37m[2024-09-03 16:50:37] [DEBUG] SPNEGO._GSS: Python gssapi not available, cannot use any GSSAPIProxy protocols: No module named 'gssapi'[0m[0m
[0;33m    [37m[2024-09-03 16:50:37] [DEBUG] SPNEGO._GSS: Python gssapi IOV extension not available: No module named 'gssapi'[0m[0m
[0;33m    ============================= test session starts ==============================[0m
[0;33m    platform linux -- Python 3.10.14, pytest-7.4.4, pluggy-1.5.0 -- /home/fcaffieri/repos/wazuh-qa/.venv/bin/python3[0m
[0;33m    cachedir: .pytest_cache[0m
[0;33m    rootdir: /home/fcaffieri/repos/wazuh-qa/deployability/modules[0m
[0;33m    collecting ... collected 4 items[0m
[0;33m  [0m
[0;33m    modules/testing/tests/test_agent/test_registration.py::test_status [32m[2024-09-03 16:50:37] [INFO] TESTER: Checking connection to ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:50:41] [INFO] TESTER: Connection established successfully in ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:50:46] [INFO] TESTER: Registering agent in ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:51:11] [INFO] TESTER: Getting status of ventura-13[0m[0m
[0;33m    PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_registration.py::test_service PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_registration.py::test_connection PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_registration.py::test_clientKeys PASSED[0m
[0;33m  [0m
[0;33m    =============================== warnings summary ===============================[0m
[0;33m    modules/provision/models.py:36[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:36: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('dependencies', pre=True)[0m
[0;33m  [0m
[0;33m    modules/provision/models.py:64[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:64: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('install', 'uninstall', pre=True)[0m
[0;33m  [0m
[0;33m    -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html[0m
[0;33m    =================== 4 passed, 2 warnings in 79.60s (0:01:19) ===================[0m
[0;33m  stdout_lines: <omitted>[0m
[32m[2024-09-03 16:51:57] [INFO] TESTER: Test registration Finished with: 
PLAY RECAP *********************************************************************
[0;33mlocalhost[0m                  : [0;32mok=2   [0m [0;33mchanged=1   [0m unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   [0m
[37m[2024-09-03 16:51:57] [DEBUG] TESTER: Using inventory: {'all': {'hosts': {'ec2-44-203-184-6.compute-1.amazonaws.com': {'ansible_port': 2200, 'ansible_user': 'ubuntu', 'ansible_ssh_private_key_file': '/tmp/wazuh-qa/wazuh-25497-ubuntu-22.04-5123/wazuh-25497-ubuntu-22.04-key-2035'}}}}[0m
[37m[2024-09-03 16:51:57] [DEBUG] TESTER: Running playbook: /home/fcaffieri/repos/wazuh-qa/deployability/modules/testing/playbooks/test.yml[0m
[0;34mUsing /etc/ansible/ansible.cfg as config file[0m

PLAY [localhost] ***************************************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [localhost][0m

TASK [Test connection for agent] ***********************************************
[0;33mchanged: [localhost] => changed=true [0m
[0;33m  cmd:[0m
[0;33m  - python3[0m
[0;33m  - -m[0m
[0;33m  - pytest[0m
[0;33m  - modules/testing/tests/test_agent/test_connection.py[0m
[0;33m  - -v[0m
[0;33m  - --wazuh_version=4.9.0[0m
[0;33m  - --wazuh_revision=40907[0m
[0;33m  - --component=agent[0m
[0;33m  - --dependencies={}[0m
[0;33m  - '--targets={wazuh-1: /tmp/dtt1-poc/manager-linux-ubuntu-22.04-amd64/inventory.yaml, agent: /tmp/dtt1-poc/agent-macos-ventura-13-amd64/inventory.yaml}'[0m
[0;33m  - --live=False[0m
[0;33m  - -s[0m
[0;33m  delta: '0:01:42.377264'[0m
[0;33m  end: '2024-09-03 16:53:41.729281'[0m
[0;33m  msg: ''[0m
[0;33m  rc: 0[0m
[0;33m  start: '2024-09-03 16:51:59.352017'[0m
[0;33m  stderr: |-[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m  stderr_lines: <omitted>[0m
[0;33m  stdout: |-[0m
[0;33m    [37m[2024-09-03 16:51:59] [DEBUG] SPNEGO._GSS: Python gssapi not available, cannot use any GSSAPIProxy protocols: No module named 'gssapi'[0m[0m
[0;33m    [37m[2024-09-03 16:51:59] [DEBUG] SPNEGO._GSS: Python gssapi IOV extension not available: No module named 'gssapi'[0m[0m
[0;33m    ============================= test session starts ==============================[0m
[0;33m    platform linux -- Python 3.10.14, pytest-7.4.4, pluggy-1.5.0 -- /home/fcaffieri/repos/wazuh-qa/.venv/bin/python3[0m
[0;33m    cachedir: .pytest_cache[0m
[0;33m    rootdir: /home/fcaffieri/repos/wazuh-qa/deployability/modules[0m
[0;33m    collecting ... collected 6 items[0m
[0;33m  [0m
[0;33m    modules/testing/tests/test_agent/test_connection.py::test_connection [32m[2024-09-03 16:51:59] [INFO] TESTER: Checking connection to ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:52:04] [INFO] TESTER: Connection established successfully in ventura-13[0m[0m
[0;33m    PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_connection.py::test_status [32m[2024-09-03 16:52:59] [INFO] TESTER: Getting status of ventura-13[0m[0m
[0;33m    PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_connection.py::test_service PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_connection.py::test_clientKeys PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_connection.py::test_port PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_connection.py::test_processes PASSED[0m
[0;33m  [0m
[0;33m    =============================== warnings summary ===============================[0m
[0;33m    modules/provision/models.py:36[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:36: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('dependencies', pre=True)[0m
[0;33m  [0m
[0;33m    modules/provision/models.py:64[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:64: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('install', 'uninstall', pre=True)[0m
[0;33m  [0m
[0;33m    -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html[0m
[0;33m    ================== 6 passed, 2 warnings in 101.66s (0:01:41) ===================[0m
[0;33m  stdout_lines: <omitted>[0m

PLAY RECAP *********************************************************************
[0;33mlocalhost[0m                  : [0;32mok=2   [0m [0;33mchanged=1   [0m unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
[37m[2024-09-03 16:53:41] [DEBUG] TESTER: Playbook /home/fcaffieri/repos/wazuh-qa/deployability/modules/testing/playbooks/test.yml finished with status {'skipped': {}, 'ok': {'localhost': 2}, 'dark': {}, 'failures': {}, 'ignored': {}, 'rescued': {}, 'processed': {'localhost': 1}, 'changed': {'localhost': 1}}[0m
[32m[2024-09-03 16:53:41] [INFO] TESTER: Test connection Finished with: [0;34mUsing /etc/ansible/ansible.cfg as config file[0m
[32m[2024-09-03 16:53:41] [INFO] TESTER: Test connection Finished with: [0m
[32m[2024-09-03 16:53:41] [INFO] TESTER: Test connection Finished with: 
PLAY [localhost] ***************************************************************[0m
[32m[2024-09-03 16:53:41] [INFO] TESTER: Test connection Finished with: 
TASK [Gathering Facts] *********************************************************[0m
[32m[2024-09-03 16:53:41] [INFO] TESTER: Test connection Finished with: [0m
[32m[2024-09-03 16:53:41] [INFO] TESTER: Test connection Finished with: [0;32mok: [localhost][0m
[32m[2024-09-03 16:53:41] [INFO] TESTER: Test connection Finished with: 
TASK [Test connection for agent] ***********************************************[0m
[32m[2024-09-03 16:53:41] [INFO] TESTER: Test connection Finished with: [0m
[32m[2024-09-03 16:53:41] [INFO] TESTER: Test connection Finished with: [0;33mchanged: [localhost] => changed=true [0m
[0;33m  cmd:[0m
[0;33m  - python3[0m
[0;33m  - -m[0m
[0;33m  - pytest[0m
[0;33m  - modules/testing/tests/test_agent/test_connection.py[0m
[0;33m  - -v[0m
[0;33m  - --wazuh_version=4.9.0[0m
[0;33m  - --wazuh_revision=40907[0m
[0;33m  - --component=agent[0m
[0;33m  - --dependencies={}[0m
[0;33m  - '--targets={wazuh-1: /tmp/dtt1-poc/manager-linux-ubuntu-22.04-amd64/inventory.yaml, agent: /tmp/dtt1-poc/agent-macos-ventura-13-amd64/inventory.yaml}'[0m
[0;33m  - --live=False[0m
[0;33m  - -s[0m
[0;33m  delta: '0:01:42.377264'[0m
[0;33m  end: '2024-09-03 16:53:41.729281'[0m
[0;33m  msg: ''[0m
[0;33m  rc: 0[0m
[0;33m  start: '2024-09-03 16:51:59.352017'[0m
[0;33m  stderr: |-[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m  stderr_lines: <omitted>[0m
[0;33m  stdout: |-[0m
[0;33m    [37m[2024-09-03 16:51:59] [DEBUG] SPNEGO._GSS: Python gssapi not available, cannot use any GSSAPIProxy protocols: No module named 'gssapi'[0m[0m
[0;33m    [37m[2024-09-03 16:51:59] [DEBUG] SPNEGO._GSS: Python gssapi IOV extension not available: No module named 'gssapi'[0m[0m
[0;33m    ============================= test session starts ==============================[0m
[0;33m    platform linux -- Python 3.10.14, pytest-7.4.4, pluggy-1.5.0 -- /home/fcaffieri/repos/wazuh-qa/.venv/bin/python3[0m
[0;33m    cachedir: .pytest_cache[0m
[0;33m    rootdir: /home/fcaffieri/repos/wazuh-qa/deployability/modules[0m
[0;33m    collecting ... collected 6 items[0m
[0;33m  [0m
[0;33m    modules/testing/tests/test_agent/test_connection.py::test_connection [32m[2024-09-03 16:51:59] [INFO] TESTER: Checking connection to ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:52:04] [INFO] TESTER: Connection established successfully in ventura-13[0m[0m
[0;33m    PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_connection.py::test_status [32m[2024-09-03 16:52:59] [INFO] TESTER: Getting status of ventura-13[0m[0m
[0;33m    PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_connection.py::test_service PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_connection.py::test_clientKeys PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_connection.py::test_port PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_connection.py::test_processes PASSED[0m
[0;33m  [0m
[0;33m    =============================== warnings summary ===============================[0m
[0;33m    modules/provision/models.py:36[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:36: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('dependencies', pre=True)[0m
[0;33m  [0m
[0;33m    modules/provision/models.py:64[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:64: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('install', 'uninstall', pre=True)[0m
[0;33m  [0m
[0;33m    -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html[0m
[0;33m    ================== 6 passed, 2 warnings in 101.66s (0:01:41) ===================[0m
[0;33m  stdout_lines: <omitted>[0m
[32m[2024-09-03 16:53:41] [INFO] TESTER: Test connection Finished with: 
PLAY RECAP *********************************************************************
[0;33mlocalhost[0m                  : [0;32mok=2   [0m [0;33mchanged=1   [0m unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   [0m
[37m[2024-09-03 16:53:41] [DEBUG] TESTER: Using inventory: {'all': {'hosts': {'ec2-44-203-184-6.compute-1.amazonaws.com': {'ansible_port': 2200, 'ansible_user': 'ubuntu', 'ansible_ssh_private_key_file': '/tmp/wazuh-qa/wazuh-25497-ubuntu-22.04-5123/wazuh-25497-ubuntu-22.04-key-2035'}}}}[0m
[37m[2024-09-03 16:53:41] [DEBUG] TESTER: Running playbook: /home/fcaffieri/repos/wazuh-qa/deployability/modules/testing/playbooks/test.yml[0m
[0;34mUsing /etc/ansible/ansible.cfg as config file[0m

PLAY [localhost] ***************************************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [localhost][0m

TASK [Test basic_info for agent] ***********************************************
[0;33mchanged: [localhost] => changed=true [0m
[0;33m  cmd:[0m
[0;33m  - python3[0m
[0;33m  - -m[0m
[0;33m  - pytest[0m
[0;33m  - modules/testing/tests/test_agent/test_basic_info.py[0m
[0;33m  - -v[0m
[0;33m  - --wazuh_version=4.9.0[0m
[0;33m  - --wazuh_revision=40907[0m
[0;33m  - --component=agent[0m
[0;33m  - --dependencies={}[0m
[0;33m  - '--targets={wazuh-1: /tmp/dtt1-poc/manager-linux-ubuntu-22.04-amd64/inventory.yaml, agent: /tmp/dtt1-poc/agent-macos-ventura-13-amd64/inventory.yaml}'[0m
[0;33m  - --live=False[0m
[0;33m  - -s[0m
[0;33m  delta: '0:00:57.545732'[0m
[0;33m  end: '2024-09-03 16:54:42.095910'[0m
[0;33m  msg: ''[0m
[0;33m  rc: 0[0m
[0;33m  start: '2024-09-03 16:53:44.550178'[0m
[0;33m  stderr: |-[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m  stderr_lines: <omitted>[0m
[0;33m  stdout: |-[0m
[0;33m    [37m[2024-09-03 16:53:45] [DEBUG] SPNEGO._GSS: Python gssapi not available, cannot use any GSSAPIProxy protocols: No module named 'gssapi'[0m[0m
[0;33m    [37m[2024-09-03 16:53:45] [DEBUG] SPNEGO._GSS: Python gssapi IOV extension not available: No module named 'gssapi'[0m[0m
[0;33m    ============================= test session starts ==============================[0m
[0;33m    platform linux -- Python 3.10.14, pytest-7.4.4, pluggy-1.5.0 -- /home/fcaffieri/repos/wazuh-qa/.venv/bin/python3[0m
[0;33m    cachedir: .pytest_cache[0m
[0;33m    rootdir: /home/fcaffieri/repos/wazuh-qa/deployability/modules[0m
[0;33m    collecting ... collected 3 items[0m
[0;33m  [0m
[0;33m    modules/testing/tests/test_agent/test_basic_info.py::test_wazuh_os_version [32m[2024-09-03 16:53:45] [INFO] TESTER: Checking connection to ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:53:49] [INFO] TESTER: Connection established successfully in ventura-13[0m[0m
[0;33m    [37m[2024-09-03 16:54:30] [DEBUG] TESTER: Version obtained from agent: 13.6.6[0m[0m
[0;33m    [37m[2024-09-03 16:54:30] [DEBUG] TESTER: Version obtained from Wazuh API: 13.6.6[0m[0m
[0;33m    PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_basic_info.py::test_wazuh_version PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_basic_info.py::test_wazuh_revision PASSED[0m
[0;33m  [0m
[0;33m    =============================== warnings summary ===============================[0m
[0;33m    modules/provision/models.py:36[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:36: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('dependencies', pre=True)[0m
[0;33m  [0m
[0;33m    modules/provision/models.py:64[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:64: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('install', 'uninstall', pre=True)[0m
[0;33m  [0m
[0;33m    -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html[0m
[0;33m    ======================== 3 passed, 2 warnings in 56.79s ========================[0m
[0;33m  stdout_lines: <omitted>[0m

PLAY RECAP *********************************************************************
[0;33mlocalhost[0m                  : [0;32mok=2   [0m [0;33mchanged=1   [0m unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
[37m[2024-09-03 16:54:42] [DEBUG] TESTER: Playbook /home/fcaffieri/repos/wazuh-qa/deployability/modules/testing/playbooks/test.yml finished with status {'skipped': {}, 'ok': {'localhost': 2}, 'dark': {}, 'failures': {}, 'ignored': {}, 'rescued': {}, 'processed': {'localhost': 1}, 'changed': {'localhost': 1}}[0m
[32m[2024-09-03 16:54:42] [INFO] TESTER: Test basic_info Finished with: [0;34mUsing /etc/ansible/ansible.cfg as config file[0m
[32m[2024-09-03 16:54:42] [INFO] TESTER: Test basic_info Finished with: [0m
[32m[2024-09-03 16:54:42] [INFO] TESTER: Test basic_info Finished with: 
PLAY [localhost] ***************************************************************[0m
[32m[2024-09-03 16:54:42] [INFO] TESTER: Test basic_info Finished with: 
TASK [Gathering Facts] *********************************************************[0m
[32m[2024-09-03 16:54:42] [INFO] TESTER: Test basic_info Finished with: [0m
[32m[2024-09-03 16:54:42] [INFO] TESTER: Test basic_info Finished with: [0;32mok: [localhost][0m
[32m[2024-09-03 16:54:42] [INFO] TESTER: Test basic_info Finished with: 
TASK [Test basic_info for agent] ***********************************************[0m
[32m[2024-09-03 16:54:42] [INFO] TESTER: Test basic_info Finished with: [0m
[32m[2024-09-03 16:54:42] [INFO] TESTER: Test basic_info Finished with: [0;33mchanged: [localhost] => changed=true [0m
[0;33m  cmd:[0m
[0;33m  - python3[0m
[0;33m  - -m[0m
[0;33m  - pytest[0m
[0;33m  - modules/testing/tests/test_agent/test_basic_info.py[0m
[0;33m  - -v[0m
[0;33m  - --wazuh_version=4.9.0[0m
[0;33m  - --wazuh_revision=40907[0m
[0;33m  - --component=agent[0m
[0;33m  - --dependencies={}[0m
[0;33m  - '--targets={wazuh-1: /tmp/dtt1-poc/manager-linux-ubuntu-22.04-amd64/inventory.yaml, agent: /tmp/dtt1-poc/agent-macos-ventura-13-amd64/inventory.yaml}'[0m
[0;33m  - --live=False[0m
[0;33m  - -s[0m
[0;33m  delta: '0:00:57.545732'[0m
[0;33m  end: '2024-09-03 16:54:42.095910'[0m
[0;33m  msg: ''[0m
[0;33m  rc: 0[0m
[0;33m  start: '2024-09-03 16:53:44.550178'[0m
[0;33m  stderr: |-[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m  stderr_lines: <omitted>[0m
[0;33m  stdout: |-[0m
[0;33m    [37m[2024-09-03 16:53:45] [DEBUG] SPNEGO._GSS: Python gssapi not available, cannot use any GSSAPIProxy protocols: No module named 'gssapi'[0m[0m
[0;33m    [37m[2024-09-03 16:53:45] [DEBUG] SPNEGO._GSS: Python gssapi IOV extension not available: No module named 'gssapi'[0m[0m
[0;33m    ============================= test session starts ==============================[0m
[0;33m    platform linux -- Python 3.10.14, pytest-7.4.4, pluggy-1.5.0 -- /home/fcaffieri/repos/wazuh-qa/.venv/bin/python3[0m
[0;33m    cachedir: .pytest_cache[0m
[0;33m    rootdir: /home/fcaffieri/repos/wazuh-qa/deployability/modules[0m
[0;33m    collecting ... collected 3 items[0m
[0;33m  [0m
[0;33m    modules/testing/tests/test_agent/test_basic_info.py::test_wazuh_os_version [32m[2024-09-03 16:53:45] [INFO] TESTER: Checking connection to ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:53:49] [INFO] TESTER: Connection established successfully in ventura-13[0m[0m
[0;33m    [37m[2024-09-03 16:54:30] [DEBUG] TESTER: Version obtained from agent: 13.6.6[0m[0m
[0;33m    [37m[2024-09-03 16:54:30] [DEBUG] TESTER: Version obtained from Wazuh API: 13.6.6[0m[0m
[0;33m    PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_basic_info.py::test_wazuh_version PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_basic_info.py::test_wazuh_revision PASSED[0m
[0;33m  [0m
[0;33m    =============================== warnings summary ===============================[0m
[0;33m    modules/provision/models.py:36[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:36: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('dependencies', pre=True)[0m
[0;33m  [0m
[0;33m    modules/provision/models.py:64[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:64: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('install', 'uninstall', pre=True)[0m
[0;33m  [0m
[0;33m    -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html[0m
[0;33m    ======================== 3 passed, 2 warnings in 56.79s ========================[0m
[0;33m  stdout_lines: <omitted>[0m
[32m[2024-09-03 16:54:42] [INFO] TESTER: Test basic_info Finished with: 
PLAY RECAP *********************************************************************
[0;33mlocalhost[0m                  : [0;32mok=2   [0m [0;33mchanged=1   [0m unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   [0m
[37m[2024-09-03 16:54:42] [DEBUG] TESTER: Using inventory: {'all': {'hosts': {'ec2-44-203-184-6.compute-1.amazonaws.com': {'ansible_port': 2200, 'ansible_user': 'ubuntu', 'ansible_ssh_private_key_file': '/tmp/wazuh-qa/wazuh-25497-ubuntu-22.04-5123/wazuh-25497-ubuntu-22.04-key-2035'}}}}[0m
[37m[2024-09-03 16:54:42] [DEBUG] TESTER: Running playbook: /home/fcaffieri/repos/wazuh-qa/deployability/modules/testing/playbooks/test.yml[0m
[0;34mUsing /etc/ansible/ansible.cfg as config file[0m

PLAY [localhost] ***************************************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [localhost][0m

TASK [Test restart for agent] **************************************************
[0;33mchanged: [localhost] => changed=true [0m
[0;33m  cmd:[0m
[0;33m  - python3[0m
[0;33m  - -m[0m
[0;33m  - pytest[0m
[0;33m  - modules/testing/tests/test_agent/test_restart.py[0m
[0;33m  - -v[0m
[0;33m  - --wazuh_version=4.9.0[0m
[0;33m  - --wazuh_revision=40907[0m
[0;33m  - --component=agent[0m
[0;33m  - --dependencies={}[0m
[0;33m  - '--targets={wazuh-1: /tmp/dtt1-poc/manager-linux-ubuntu-22.04-amd64/inventory.yaml, agent: /tmp/dtt1-poc/agent-macos-ventura-13-amd64/inventory.yaml}'[0m
[0;33m  - --live=False[0m
[0;33m  - -s[0m
[0;33m  delta: '0:01:09.599969'[0m
[0;33m  end: '2024-09-03 16:55:54.017439'[0m
[0;33m  msg: ''[0m
[0;33m  rc: 0[0m
[0;33m  start: '2024-09-03 16:54:44.417470'[0m
[0;33m  stderr: 'Warning: Permanently added ''[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200'' (ECDSA) to the list of known hosts.'[0m
[0;33m  stderr_lines: <omitted>[0m
[0;33m  stdout: |-[0m
[0;33m    [37m[2024-09-03 16:54:44] [DEBUG] SPNEGO._GSS: Python gssapi not available, cannot use any GSSAPIProxy protocols: No module named 'gssapi'[0m[0m
[0;33m    [37m[2024-09-03 16:54:44] [DEBUG] SPNEGO._GSS: Python gssapi IOV extension not available: No module named 'gssapi'[0m[0m
[0;33m    ============================= test session starts ==============================[0m
[0;33m    platform linux -- Python 3.10.14, pytest-7.4.4, pluggy-1.5.0 -- /home/fcaffieri/repos/wazuh-qa/.venv/bin/python3[0m
[0;33m    cachedir: .pytest_cache[0m
[0;33m    rootdir: /home/fcaffieri/repos/wazuh-qa/deployability/modules[0m
[0;33m    collecting ... collected 7 items[0m
[0;33m  [0m
[0;33m    modules/testing/tests/test_agent/test_restart.py::test_restart [32m[2024-09-03 16:54:45] [INFO] TESTER: Checking connection to ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:54:49] [INFO] TESTER: Connection established successfully in ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:55:05] [INFO] TESTER: Restarting wazuh-agent in ventura-13[0m[0m
[0;33m    PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_restart.py::test_status [32m[2024-09-03 16:55:19] [INFO] TESTER: Getting status of ventura-13[0m[0m
[0;33m    PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_restart.py::test_connection PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_restart.py::test_isActive PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_restart.py::test_clientKeys PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_restart.py::test_port PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_restart.py::test_processes PASSED[0m
[0;33m  [0m
[0;33m    =============================== warnings summary ===============================[0m
[0;33m    modules/provision/models.py:36[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:36: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('dependencies', pre=True)[0m
[0;33m  [0m
[0;33m    modules/provision/models.py:64[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:64: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('install', 'uninstall', pre=True)[0m
[0;33m  [0m
[0;33m    -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html[0m
[0;33m    =================== 7 passed, 2 warnings in 68.88s (0:01:08) ===================[0m
[0;33m  stdout_lines: <omitted>[0m

PLAY RECAP *********************************************************************
[0;33mlocalhost[0m                  : [0;32mok=2   [0m [0;33mchanged=1   [0m unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
[37m[2024-09-03 16:55:54] [DEBUG] TESTER: Playbook /home/fcaffieri/repos/wazuh-qa/deployability/modules/testing/playbooks/test.yml finished with status {'skipped': {}, 'ok': {'localhost': 2}, 'dark': {}, 'failures': {}, 'ignored': {}, 'rescued': {}, 'processed': {'localhost': 1}, 'changed': {'localhost': 1}}[0m
[32m[2024-09-03 16:55:54] [INFO] TESTER: Test restart Finished with: [0;34mUsing /etc/ansible/ansible.cfg as config file[0m
[32m[2024-09-03 16:55:54] [INFO] TESTER: Test restart Finished with: [0m
[32m[2024-09-03 16:55:54] [INFO] TESTER: Test restart Finished with: 
PLAY [localhost] ***************************************************************[0m
[32m[2024-09-03 16:55:54] [INFO] TESTER: Test restart Finished with: 
TASK [Gathering Facts] *********************************************************[0m
[32m[2024-09-03 16:55:54] [INFO] TESTER: Test restart Finished with: [0m
[32m[2024-09-03 16:55:54] [INFO] TESTER: Test restart Finished with: [0;32mok: [localhost][0m
[32m[2024-09-03 16:55:54] [INFO] TESTER: Test restart Finished with: 
TASK [Test restart for agent] **************************************************[0m
[32m[2024-09-03 16:55:54] [INFO] TESTER: Test restart Finished with: [0m
[32m[2024-09-03 16:55:54] [INFO] TESTER: Test restart Finished with: [0;33mchanged: [localhost] => changed=true [0m
[0;33m  cmd:[0m
[0;33m  - python3[0m
[0;33m  - -m[0m
[0;33m  - pytest[0m
[0;33m  - modules/testing/tests/test_agent/test_restart.py[0m
[0;33m  - -v[0m
[0;33m  - --wazuh_version=4.9.0[0m
[0;33m  - --wazuh_revision=40907[0m
[0;33m  - --component=agent[0m
[0;33m  - --dependencies={}[0m
[0;33m  - '--targets={wazuh-1: /tmp/dtt1-poc/manager-linux-ubuntu-22.04-amd64/inventory.yaml, agent: /tmp/dtt1-poc/agent-macos-ventura-13-amd64/inventory.yaml}'[0m
[0;33m  - --live=False[0m
[0;33m  - -s[0m
[0;33m  delta: '0:01:09.599969'[0m
[0;33m  end: '2024-09-03 16:55:54.017439'[0m
[0;33m  msg: ''[0m
[0;33m  rc: 0[0m
[0;33m  start: '2024-09-03 16:54:44.417470'[0m
[0;33m  stderr: 'Warning: Permanently added ''[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200'' (ECDSA) to the list of known hosts.'[0m
[0;33m  stderr_lines: <omitted>[0m
[0;33m  stdout: |-[0m
[0;33m    [37m[2024-09-03 16:54:44] [DEBUG] SPNEGO._GSS: Python gssapi not available, cannot use any GSSAPIProxy protocols: No module named 'gssapi'[0m[0m
[0;33m    [37m[2024-09-03 16:54:44] [DEBUG] SPNEGO._GSS: Python gssapi IOV extension not available: No module named 'gssapi'[0m[0m
[0;33m    ============================= test session starts ==============================[0m
[0;33m    platform linux -- Python 3.10.14, pytest-7.4.4, pluggy-1.5.0 -- /home/fcaffieri/repos/wazuh-qa/.venv/bin/python3[0m
[0;33m    cachedir: .pytest_cache[0m
[0;33m    rootdir: /home/fcaffieri/repos/wazuh-qa/deployability/modules[0m
[0;33m    collecting ... collected 7 items[0m
[0;33m  [0m
[0;33m    modules/testing/tests/test_agent/test_restart.py::test_restart [32m[2024-09-03 16:54:45] [INFO] TESTER: Checking connection to ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:54:49] [INFO] TESTER: Connection established successfully in ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:55:05] [INFO] TESTER: Restarting wazuh-agent in ventura-13[0m[0m
[0;33m    PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_restart.py::test_status [32m[2024-09-03 16:55:19] [INFO] TESTER: Getting status of ventura-13[0m[0m
[0;33m    PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_restart.py::test_connection PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_restart.py::test_isActive PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_restart.py::test_clientKeys PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_restart.py::test_port PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_restart.py::test_processes PASSED[0m
[0;33m  [0m
[0;33m    =============================== warnings summary ===============================[0m
[0;33m    modules/provision/models.py:36[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:36: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('dependencies', pre=True)[0m
[0;33m  [0m
[0;33m    modules/provision/models.py:64[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:64: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('install', 'uninstall', pre=True)[0m
[0;33m  [0m
[0;33m    -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html[0m
[0;33m    =================== 7 passed, 2 warnings in 68.88s (0:01:08) ===================[0m
[0;33m  stdout_lines: <omitted>[0m
[32m[2024-09-03 16:55:54] [INFO] TESTER: Test restart Finished with: 
PLAY RECAP *********************************************************************
[0;33mlocalhost[0m                  : [0;32mok=2   [0m [0;33mchanged=1   [0m unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   [0m
[37m[2024-09-03 16:55:54] [DEBUG] TESTER: Using inventory: {'all': {'hosts': {'ec2-44-203-184-6.compute-1.amazonaws.com': {'ansible_port': 2200, 'ansible_user': 'ubuntu', 'ansible_ssh_private_key_file': '/tmp/wazuh-qa/wazuh-25497-ubuntu-22.04-5123/wazuh-25497-ubuntu-22.04-key-2035'}}}}[0m
[37m[2024-09-03 16:55:54] [DEBUG] TESTER: Running playbook: /home/fcaffieri/repos/wazuh-qa/deployability/modules/testing/playbooks/test.yml[0m
[0;34mUsing /etc/ansible/ansible.cfg as config file[0m

PLAY [localhost] ***************************************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [localhost][0m

TASK [Test stop for agent] *****************************************************
[0;33mchanged: [localhost] => changed=true [0m
[0;33m  cmd:[0m
[0;33m  - python3[0m
[0;33m  - -m[0m
[0;33m  - pytest[0m
[0;33m  - modules/testing/tests/test_agent/test_stop.py[0m
[0;33m  - -v[0m
[0;33m  - --wazuh_version=4.9.0[0m
[0;33m  - --wazuh_revision=40907[0m
[0;33m  - --component=agent[0m
[0;33m  - --dependencies={}[0m
[0;33m  - '--targets={wazuh-1: /tmp/dtt1-poc/manager-linux-ubuntu-22.04-amd64/inventory.yaml, agent: /tmp/dtt1-poc/agent-macos-ventura-13-amd64/inventory.yaml}'[0m
[0;33m  - --live=False[0m
[0;33m  - -s[0m
[0;33m  delta: '0:01:32.621539'[0m
[0;33m  end: '2024-09-03 16:57:28.942857'[0m
[0;33m  msg: ''[0m
[0;33m  rc: 0[0m
[0;33m  start: '2024-09-03 16:55:56.321318'[0m
[0;33m  stderr: |-[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m  stderr_lines: <omitted>[0m
[0;33m  stdout: |-[0m
[0;33m    [37m[2024-09-03 16:55:56] [DEBUG] SPNEGO._GSS: Python gssapi not available, cannot use any GSSAPIProxy protocols: No module named 'gssapi'[0m[0m
[0;33m    [37m[2024-09-03 16:55:56] [DEBUG] SPNEGO._GSS: Python gssapi IOV extension not available: No module named 'gssapi'[0m[0m
[0;33m    ============================= test session starts ==============================[0m
[0;33m    platform linux -- Python 3.10.14, pytest-7.4.4, pluggy-1.5.0 -- /home/fcaffieri/repos/wazuh-qa/.venv/bin/python3[0m
[0;33m    cachedir: .pytest_cache[0m
[0;33m    rootdir: /home/fcaffieri/repos/wazuh-qa/deployability/modules[0m
[0;33m    collecting ... collected 3 items[0m
[0;33m  [0m
[0;33m    modules/testing/tests/test_agent/test_stop.py::test_service [32m[2024-09-03 16:55:56] [INFO] TESTER: Checking connection to ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:56:01] [INFO] TESTER: Connection established successfully in ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:56:26] [INFO] TESTER: Stopping wazuh-agent in ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:56:32] [INFO] TESTER: Getting status of ventura-13[0m[0m
[0;33m    PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_stop.py::test_port PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_stop.py::test_processes PASSED[32m[2024-09-03 16:57:14] [INFO] TESTER: Restarting wazuh-agent in ventura-13[0m[0m
[0;33m  [0m
[0;33m  [0m
[0;33m    =============================== warnings summary ===============================[0m
[0;33m    modules/provision/models.py:36[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:36: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('dependencies', pre=True)[0m
[0;33m  [0m
[0;33m    modules/provision/models.py:64[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:64: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('install', 'uninstall', pre=True)[0m
[0;33m  [0m
[0;33m    -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html[0m
[0;33m    =================== 3 passed, 2 warnings in 91.88s (0:01:31) ===================[0m
[0;33m  stdout_lines: <omitted>[0m

PLAY RECAP *********************************************************************
[0;33mlocalhost[0m                  : [0;32mok=2   [0m [0;33mchanged=1   [0m unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
[37m[2024-09-03 16:57:29] [DEBUG] TESTER: Playbook /home/fcaffieri/repos/wazuh-qa/deployability/modules/testing/playbooks/test.yml finished with status {'skipped': {}, 'ok': {'localhost': 2}, 'dark': {}, 'failures': {}, 'ignored': {}, 'rescued': {}, 'processed': {'localhost': 1}, 'changed': {'localhost': 1}}[0m
[32m[2024-09-03 16:57:29] [INFO] TESTER: Test stop Finished with: [0;34mUsing /etc/ansible/ansible.cfg as config file[0m
[32m[2024-09-03 16:57:29] [INFO] TESTER: Test stop Finished with: [0m
[32m[2024-09-03 16:57:29] [INFO] TESTER: Test stop Finished with: 
PLAY [localhost] ***************************************************************[0m
[32m[2024-09-03 16:57:29] [INFO] TESTER: Test stop Finished with: 
TASK [Gathering Facts] *********************************************************[0m
[32m[2024-09-03 16:57:29] [INFO] TESTER: Test stop Finished with: [0m
[32m[2024-09-03 16:57:29] [INFO] TESTER: Test stop Finished with: [0;32mok: [localhost][0m
[32m[2024-09-03 16:57:29] [INFO] TESTER: Test stop Finished with: 
TASK [Test stop for agent] *****************************************************[0m
[32m[2024-09-03 16:57:29] [INFO] TESTER: Test stop Finished with: [0m
[32m[2024-09-03 16:57:29] [INFO] TESTER: Test stop Finished with: [0;33mchanged: [localhost] => changed=true [0m
[0;33m  cmd:[0m
[0;33m  - python3[0m
[0;33m  - -m[0m
[0;33m  - pytest[0m
[0;33m  - modules/testing/tests/test_agent/test_stop.py[0m
[0;33m  - -v[0m
[0;33m  - --wazuh_version=4.9.0[0m
[0;33m  - --wazuh_revision=40907[0m
[0;33m  - --component=agent[0m
[0;33m  - --dependencies={}[0m
[0;33m  - '--targets={wazuh-1: /tmp/dtt1-poc/manager-linux-ubuntu-22.04-amd64/inventory.yaml, agent: /tmp/dtt1-poc/agent-macos-ventura-13-amd64/inventory.yaml}'[0m
[0;33m  - --live=False[0m
[0;33m  - -s[0m
[0;33m  delta: '0:01:32.621539'[0m
[0;33m  end: '2024-09-03 16:57:28.942857'[0m
[0;33m  msg: ''[0m
[0;33m  rc: 0[0m
[0;33m  start: '2024-09-03 16:55:56.321318'[0m
[0;33m  stderr: |-[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m  stderr_lines: <omitted>[0m
[0;33m  stdout: |-[0m
[0;33m    [37m[2024-09-03 16:55:56] [DEBUG] SPNEGO._GSS: Python gssapi not available, cannot use any GSSAPIProxy protocols: No module named 'gssapi'[0m[0m
[0;33m    [37m[2024-09-03 16:55:56] [DEBUG] SPNEGO._GSS: Python gssapi IOV extension not available: No module named 'gssapi'[0m[0m
[0;33m    ============================= test session starts ==============================[0m
[0;33m    platform linux -- Python 3.10.14, pytest-7.4.4, pluggy-1.5.0 -- /home/fcaffieri/repos/wazuh-qa/.venv/bin/python3[0m
[0;33m    cachedir: .pytest_cache[0m
[0;33m    rootdir: /home/fcaffieri/repos/wazuh-qa/deployability/modules[0m
[0;33m    collecting ... collected 3 items[0m
[0;33m  [0m
[0;33m    modules/testing/tests/test_agent/test_stop.py::test_service [32m[2024-09-03 16:55:56] [INFO] TESTER: Checking connection to ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:56:01] [INFO] TESTER: Connection established successfully in ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:56:26] [INFO] TESTER: Stopping wazuh-agent in ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:56:32] [INFO] TESTER: Getting status of ventura-13[0m[0m
[0;33m    PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_stop.py::test_port PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_stop.py::test_processes PASSED[32m[2024-09-03 16:57:14] [INFO] TESTER: Restarting wazuh-agent in ventura-13[0m[0m
[0;33m  [0m
[0;33m  [0m
[0;33m    =============================== warnings summary ===============================[0m
[0;33m    modules/provision/models.py:36[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:36: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('dependencies', pre=True)[0m
[0;33m  [0m
[0;33m    modules/provision/models.py:64[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:64: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('install', 'uninstall', pre=True)[0m
[0;33m  [0m
[0;33m    -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html[0m
[0;33m    =================== 3 passed, 2 warnings in 91.88s (0:01:31) ===================[0m
[0;33m  stdout_lines: <omitted>[0m
[32m[2024-09-03 16:57:29] [INFO] TESTER: Test stop Finished with: 
PLAY RECAP *********************************************************************
[0;33mlocalhost[0m                  : [0;32mok=2   [0m [0;33mchanged=1   [0m unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   [0m
[37m[2024-09-03 16:57:29] [DEBUG] TESTER: Using inventory: {'all': {'hosts': {'ec2-44-203-184-6.compute-1.amazonaws.com': {'ansible_port': 2200, 'ansible_user': 'ubuntu', 'ansible_ssh_private_key_file': '/tmp/wazuh-qa/wazuh-25497-ubuntu-22.04-5123/wazuh-25497-ubuntu-22.04-key-2035'}}}}[0m
[37m[2024-09-03 16:57:29] [DEBUG] TESTER: Running playbook: /home/fcaffieri/repos/wazuh-qa/deployability/modules/testing/playbooks/test.yml[0m
[0;34mUsing /etc/ansible/ansible.cfg as config file[0m

PLAY [localhost] ***************************************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [localhost][0m

TASK [Test uninstall for agent] ************************************************
[0;33mchanged: [localhost] => changed=true [0m
[0;33m  cmd:[0m
[0;33m  - python3[0m
[0;33m  - -m[0m
[0;33m  - pytest[0m
[0;33m  - modules/testing/tests/test_agent/test_uninstall.py[0m
[0;33m  - -v[0m
[0;33m  - --wazuh_version=4.9.0[0m
[0;33m  - --wazuh_revision=40907[0m
[0;33m  - --component=agent[0m
[0;33m  - --dependencies={}[0m
[0;33m  - '--targets={wazuh-1: /tmp/dtt1-poc/manager-linux-ubuntu-22.04-amd64/inventory.yaml, agent: /tmp/dtt1-poc/agent-macos-ventura-13-amd64/inventory.yaml}'[0m
[0;33m  - --live=False[0m
[0;33m  - -s[0m
[0;33m  delta: '0:02:24.080169'[0m
[0;33m  end: '2024-09-03 16:59:55.295675'[0m
[0;33m  msg: ''[0m
[0;33m  rc: 0[0m
[0;33m  start: '2024-09-03 16:57:31.215506'[0m
[0;33m  stderr: |-[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m  stderr_lines: <omitted>[0m
[0;33m  stdout: |-[0m
[0;33m    [37m[2024-09-03 16:57:31] [DEBUG] SPNEGO._GSS: Python gssapi not available, cannot use any GSSAPIProxy protocols: No module named 'gssapi'[0m[0m
[0;33m    [37m[2024-09-03 16:57:31] [DEBUG] SPNEGO._GSS: Python gssapi IOV extension not available: No module named 'gssapi'[0m[0m
[0;33m    ============================= test session starts ==============================[0m
[0;33m    platform linux -- Python 3.10.14, pytest-7.4.4, pluggy-1.5.0 -- /home/fcaffieri/repos/wazuh-qa/.venv/bin/python3[0m
[0;33m    cachedir: .pytest_cache[0m
[0;33m    rootdir: /home/fcaffieri/repos/wazuh-qa/deployability/modules[0m
[0;33m    collecting ... collected 5 items[0m
[0;33m  [0m
[0;33m    modules/testing/tests/test_agent/test_uninstall.py::test_uninstall [32m[2024-09-03 16:57:31] [INFO] TESTER: Checking connection to ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:57:36] [INFO] TESTER: Connection established successfully in ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:58:09] [INFO] TESTER: Uninstalling Agent in ventura-13[0m[0m
[0;33m    PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_uninstall.py::test_agent_uninstalled_directory PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_uninstall.py::test_service PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_uninstall.py::test_port PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_uninstall.py::test_processes PASSED[0m
[0;33m  [0m
[0;33m    =============================== warnings summary ===============================[0m
[0;33m    modules/provision/models.py:36[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:36: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('dependencies', pre=True)[0m
[0;33m  [0m
[0;33m    modules/provision/models.py:64[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:64: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('install', 'uninstall', pre=True)[0m
[0;33m  [0m
[0;33m    -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html[0m
[0;33m    ================== 5 passed, 2 warnings in 143.39s (0:02:23) ===================[0m
[0;33m  stdout_lines: <omitted>[0m

PLAY RECAP *********************************************************************
[0;33mlocalhost[0m                  : [0;32mok=2   [0m [0;33mchanged=1   [0m unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
[37m[2024-09-03 16:59:55] [DEBUG] TESTER: Playbook /home/fcaffieri/repos/wazuh-qa/deployability/modules/testing/playbooks/test.yml finished with status {'skipped': {}, 'ok': {'localhost': 2}, 'dark': {}, 'failures': {}, 'ignored': {}, 'rescued': {}, 'processed': {'localhost': 1}, 'changed': {'localhost': 1}}[0m
[32m[2024-09-03 16:59:55] [INFO] TESTER: Test uninstall Finished with: [0;34mUsing /etc/ansible/ansible.cfg as config file[0m
[32m[2024-09-03 16:59:55] [INFO] TESTER: Test uninstall Finished with: [0m
[32m[2024-09-03 16:59:55] [INFO] TESTER: Test uninstall Finished with: 
PLAY [localhost] ***************************************************************[0m
[32m[2024-09-03 16:59:55] [INFO] TESTER: Test uninstall Finished with: 
TASK [Gathering Facts] *********************************************************[0m
[32m[2024-09-03 16:59:55] [INFO] TESTER: Test uninstall Finished with: [0m
[32m[2024-09-03 16:59:55] [INFO] TESTER: Test uninstall Finished with: [0;32mok: [localhost][0m
[32m[2024-09-03 16:59:55] [INFO] TESTER: Test uninstall Finished with: 
TASK [Test uninstall for agent] ************************************************[0m
[32m[2024-09-03 16:59:55] [INFO] TESTER: Test uninstall Finished with: [0m
[32m[2024-09-03 16:59:55] [INFO] TESTER: Test uninstall Finished with: [0;33mchanged: [localhost] => changed=true [0m
[0;33m  cmd:[0m
[0;33m  - python3[0m
[0;33m  - -m[0m
[0;33m  - pytest[0m
[0;33m  - modules/testing/tests/test_agent/test_uninstall.py[0m
[0;33m  - -v[0m
[0;33m  - --wazuh_version=4.9.0[0m
[0;33m  - --wazuh_revision=40907[0m
[0;33m  - --component=agent[0m
[0;33m  - --dependencies={}[0m
[0;33m  - '--targets={wazuh-1: /tmp/dtt1-poc/manager-linux-ubuntu-22.04-amd64/inventory.yaml, agent: /tmp/dtt1-poc/agent-macos-ventura-13-amd64/inventory.yaml}'[0m
[0;33m  - --live=False[0m
[0;33m  - -s[0m
[0;33m  delta: '0:02:24.080169'[0m
[0;33m  end: '2024-09-03 16:59:55.295675'[0m
[0;33m  msg: ''[0m
[0;33m  rc: 0[0m
[0;33m  start: '2024-09-03 16:57:31.215506'[0m
[0;33m  stderr: |-[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m    Warning: Permanently added '[ec2-44-203-184-6.compute-1.amazonaws.com]:2200,[44.203.184.6]:2200' (ECDSA) to the list of known hosts.[0m
[0;33m  stderr_lines: <omitted>[0m
[0;33m  stdout: |-[0m
[0;33m    [37m[2024-09-03 16:57:31] [DEBUG] SPNEGO._GSS: Python gssapi not available, cannot use any GSSAPIProxy protocols: No module named 'gssapi'[0m[0m
[0;33m    [37m[2024-09-03 16:57:31] [DEBUG] SPNEGO._GSS: Python gssapi IOV extension not available: No module named 'gssapi'[0m[0m
[0;33m    ============================= test session starts ==============================[0m
[0;33m    platform linux -- Python 3.10.14, pytest-7.4.4, pluggy-1.5.0 -- /home/fcaffieri/repos/wazuh-qa/.venv/bin/python3[0m
[0;33m    cachedir: .pytest_cache[0m
[0;33m    rootdir: /home/fcaffieri/repos/wazuh-qa/deployability/modules[0m
[0;33m    collecting ... collected 5 items[0m
[0;33m  [0m
[0;33m    modules/testing/tests/test_agent/test_uninstall.py::test_uninstall [32m[2024-09-03 16:57:31] [INFO] TESTER: Checking connection to ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:57:36] [INFO] TESTER: Connection established successfully in ventura-13[0m[0m
[0;33m    [32m[2024-09-03 16:58:09] [INFO] TESTER: Uninstalling Agent in ventura-13[0m[0m
[0;33m    PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_uninstall.py::test_agent_uninstalled_directory PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_uninstall.py::test_service PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_uninstall.py::test_port PASSED[0m
[0;33m    modules/testing/tests/test_agent/test_uninstall.py::test_processes PASSED[0m
[0;33m  [0m
[0;33m    =============================== warnings summary ===============================[0m
[0;33m    modules/provision/models.py:36[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:36: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('dependencies', pre=True)[0m
[0;33m  [0m
[0;33m    modules/provision/models.py:64[0m
[0;33m      /home/fcaffieri/repos/wazuh-qa/deployability/modules/provision/models.py:64: PydanticDeprecatedSince20: Pydantic V1 style `@validator` validators are deprecated. You should migrate to Pydantic V2 style `@field_validator` validators, see the migration guide for more details. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.5/migration/[0m
[0;33m        @validator('install', 'uninstall', pre=True)[0m
[0;33m  [0m
[0;33m    -- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html[0m
[0;33m    ================== 5 passed, 2 warnings in 143.39s (0:02:23) ===================[0m
[0;33m  stdout_lines: <omitted>[0m
[32m[2024-09-03 16:59:55] [INFO] TESTER: Test uninstall Finished with: 
PLAY RECAP *********************************************************************
[0;33mlocalhost[0m                  : [0;32mok=2   [0m [0;33mchanged=1   [0m unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   [0m
[32m[2024-09-03 16:59:55] [INFO] TESTER: Cleaning up[0m
[37m[2024-09-03 16:59:55] [DEBUG] TESTER: Using inventory: {'all': {'hosts': {'ec2-44-203-184-6.compute-1.amazonaws.com': {'ansible_port': 2200, 'ansible_user': 'ubuntu', 'ansible_ssh_private_key_file': '/tmp/wazuh-qa/wazuh-25497-ubuntu-22.04-5123/wazuh-25497-ubuntu-22.04-key-2035'}}}}[0m
[37m[2024-09-03 16:59:55] [DEBUG] TESTER: Running playbook: /home/fcaffieri/repos/wazuh-qa/deployability/modules/testing/playbooks/cleanup.yml[0m
[0;34mUsing /etc/ansible/ansible.cfg as config file[0m

PLAY [localhost] ***************************************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [localhost][0m

TASK [Clean test directory] ****************************************************
[0;32mok: [localhost] => changed=false [0m
[0;32m  path: /tmp/tests[0m
[0;32m  state: absent[0m

PLAY RECAP *********************************************************************
[0;32mlocalhost[0m                  : [0;32mok=2   [0m changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
[37m[2024-09-03 16:59:57] [DEBUG] TESTER: Playbook /home/fcaffieri/repos/wazuh-qa/deployability/modules/testing/playbooks/cleanup.yml finished with status {'skipped': {}, 'ok': {'localhost': 2}, 'dark': {}, 'failures': {}, 'ignored': {}, 'rescued': {}, 'processed': {'localhost': 1}, 'changed': {}}[0m
[32m[2024-09-03 16:59:57] [INFO] TESTER: Cleaning up[0m
[37m[2024-09-03 16:59:57] [DEBUG] TESTER: Using inventory: {'all': {'hosts': {'ec2-44-203-184-6.compute-1.amazonaws.com': {'ansible_port': 2200, 'ansible_user': 'ubuntu', 'ansible_ssh_private_key_file': '/tmp/wazuh-qa/wazuh-25497-ubuntu-22.04-5123/wazuh-25497-ubuntu-22.04-key-2035'}}}}[0m
[37m[2024-09-03 16:59:57] [DEBUG] TESTER: Running playbook: /home/fcaffieri/repos/wazuh-qa/deployability/modules/testing/playbooks/cleanup.yml[0m
[0;34mUsing /etc/ansible/ansible.cfg as config file[0m

PLAY [localhost] ***************************************************************

TASK [Gathering Facts] *********************************************************
[0;32mok: [localhost][0m

TASK [Clean test directory] ****************************************************
[0;32mok: [localhost] => changed=false [0m
[0;32m  path: /tmp/tests[0m
[0;32m  state: absent[0m

PLAY RECAP *********************************************************************
[0;32mlocalhost[0m                  : [0;32mok=2   [0m changed=0    unreachable=0    failed=0    skipped=0    rescued=0    ignored=0   
[37m[2024-09-03 17:00:00] [DEBUG] TESTER: Playbook /home/fcaffieri/repos/wazuh-qa/deployability/modules/testing/playbooks/cleanup.yml finished with status {'skipped': {}, 'ok': {'localhost': 2}, 'dark': {}, 'failures': {}, 'ignored': {}, 'rescued': {}, 'processed': {'localhost': 1}, 'changed': {}}[0m
[0m
[32m[2024-09-03 17:00:00] [INFO] [1671171] [ThreadPoolExecutor-0_0] [jobflow]: [run-macos-agent-macos-ventura-13-amd64-tests] Finished task in 628.48 seconds.[0m
[32m[2024-09-03 17:00:00] [INFO] [1671171] [MainThread] [jobflow]: Executing Reverse DAG tasks.[0m
[32m[2024-09-03 17:00:00] [INFO] [1671171] [MainThread] [jobflow]: Executing tasks in parallel.[0m
[32m[2024-09-03 17:00:00] [INFO] [1671171] [ThreadPoolExecutor-1_0] [jobflow]: [allocate-macos-agent-macos-ventura-13-amd64] Starting task.[0m
[36m[2024-09-03 17:00:00] [DEBUG] [1671171] [ThreadPoolExecutor-1_0] [jobflow]: Running task "allocate-macos-agent-macos-ventura-13-amd64" with arguments: ['modules/allocation/main.py', '--action=delete', '--track-output=/tmp/dtt1-poc/agent-macos-ventura-13-amd64/track.yaml'][0m
[36m[2024-09-03 17:00:51] [DEBUG] [1671171] [ThreadPoolExecutor-1_0] [jobflow]: Finished task "allocate-macos-agent-macos-ventura-13-amd64" execution with result:
[37m[2024-09-03 17:00:00] [DEBUG] SPNEGO._GSS: Python gssapi not available, cannot use any GSSAPIProxy protocols: No module named 'gssapi'[0m
[37m[2024-09-03 17:00:00] [DEBUG] SPNEGO._GSS: Python gssapi IOV extension not available: No module named 'gssapi'[0m
[32m[2024-09-03 17:00:00] [INFO] ALLOCATOR: Deleting instance from trackfile /tmp/dtt1-poc/agent-macos-ventura-13-amd64/track.yaml[0m
[37m[2024-09-03 17:00:02] [DEBUG] ALLOCATOR: Destroying instance wazuh-25497-ventura-13-1230[0m
[37m[2024-09-03 17:00:34] [DEBUG] ALLOCATOR: Deleting remote directory /Users/jenkins/testing/wazuh-25497-ventura-13-1230[0m
[37m[2024-09-03 17:00:40] [DEBUG] ALLOCATOR: Killing remote process on port 43222[0m
[32m[2024-09-03 17:00:51] [INFO] ALLOCATOR: Instance wazuh-25497-ventura-13-1230 deleted.[0m
[0m
[32m[2024-09-03 17:00:51] [INFO] [1671171] [ThreadPoolExecutor-1_0] [jobflow]: [allocate-macos-agent-macos-ventura-13-amd64] Finished task in 51.56 seconds.[0m
[32m[2024-09-03 17:00:51] [INFO] [1671171] [ThreadPoolExecutor-1_0] [jobflow]: [allocate-manager-linux-ubuntu-22.04-amd64] Starting task.[0m
[36m[2024-09-03 17:00:51] [DEBUG] [1671171] [ThreadPoolExecutor-1_0] [jobflow]: Running task "allocate-manager-linux-ubuntu-22.04-amd64" with arguments: ['modules/allocation/main.py', '--action=delete', '--track-output=/tmp/dtt1-poc/manager-linux-ubuntu-22.04-amd64/track.yaml'][0m
[36m[2024-09-03 17:01:41] [DEBUG] [1671171] [ThreadPoolExecutor-1_0] [jobflow]: Finished task "allocate-manager-linux-ubuntu-22.04-amd64" execution with result:
[37m[2024-09-03 17:00:52] [DEBUG] SPNEGO._GSS: Python gssapi not available, cannot use any GSSAPIProxy protocols: No module named 'gssapi'[0m
[37m[2024-09-03 17:00:52] [DEBUG] SPNEGO._GSS: Python gssapi IOV extension not available: No module named 'gssapi'[0m
[32m[2024-09-03 17:00:52] [INFO] ALLOCATOR: Deleting instance from trackfile /tmp/dtt1-poc/manager-linux-ubuntu-22.04-amd64/track.yaml[0m
[37m[2024-09-03 17:00:53] [DEBUG] ALLOCATOR: Deleting credentials: wazuh-25497-ubuntu-22.04-key-2035[0m
[32m[2024-09-03 17:01:41] [INFO] ALLOCATOR [WAZUH-25497-UBUNTU-22.04]: Instance i-0d760962e3a5eebe1 deleted.[0m
[0m
[32m[2024-09-03 17:01:41] [INFO] [1671171] [ThreadPoolExecutor-1_0] [jobflow]: [allocate-manager-linux-ubuntu-22.04-amd64] Finished task in 49.33 seconds.[0m
